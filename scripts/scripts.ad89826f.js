(function(){"use strict";angular.module("swarmApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","swarmEnv","swarmSpreadsheetPreload","angulartics","angulartics.google.analytics"]),angular.module("swarmApp").config(["$routeProvider",function(a){return a.when("/debug",{templateUrl:"views/debug.html",controller:"DebugCtrl"}).when("/",{templateUrl:"views/unitlist.html",controller:"UnitlistCtrl"}).when("/unitlist",{templateUrl:"views/unitlist.html",controller:"UnitlistCtrl"}).when("/unitlist/:unit",{templateUrl:"views/unitlist.html",controller:"UnitlistCtrl"}).when("/options",{templateUrl:"views/options.html",controller:"OptionsCtrl"}).when("/changelog",{templateUrl:"views/changelog.html",controller:"ChangelogCtrl"}).when("/statistics",{templateUrl:"views/statistics.html",controller:"StatisticsCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("swarmApp").config(["env",function(a){return"prod"===a&&"http:"===window.location.protocol?window.location.protocol="https:":void 0}])}).call(this),angular.module("swarmEnv",[]).constant("version","0.1.0").constant("env","prod"),angular.module("swarmSpreadsheetPreload",[]).value("spreadsheetPreload",{achievements:{column_names:["name","label","description","longdesc","requireunit","require"],elements:[{description:"Build a drone",label:"Worker Bee",longdesc:"A swarm is not built by only one hand.",name:"drone1",require:1,requireunit:"drone",rowNumber:1},{description:"Build 201 drones",label:"Supply Limit Exceeded",longdesc:"",name:"drone2",require:201,requireunit:"drone",rowNumber:2},{description:"Build a queen",label:"",longdesc:"",name:"queen1",require:1,requireunit:"queen",rowNumber:3}],name:"achievements"},unittypes:{column_names:["name","label","plural","verb","verbone","column","init","description","lol","disabled","unbuyable","tier","cost.unittype","cost.val","prod.unittype","prod.val","showparent"],elements:[{column:0,"cost.unittype":"","cost.val":"",description:"Main source of larvae. Everyone starts with one, and no one can buy more. No one knows they have it, because it's invisible.",disabled:"TRUE",init:1,label:"invisible hatchery",lol:"Stop digging around in the source code, you dirty cheater.",name:"invisiblehatchery",plural:"invisible hatcherytachi","prod.unittype":"larva","prod.val":1,rowNumber:1,showparent:"",tier:"",unbuyable:"TRUE",verb:"",verbone:""},{column:0,"cost.unittype":"","cost.val":"",description:"Meat is delicious. All of your swarm's creatures eat meat.",disabled:"",init:35,label:"meat",lol:"Some kingdoms use meat to craft paste or cars. Meat, meat, it can't be beat~",name:"meat",plural:"meat","prod.unittype":"","prod.val":"",rowNumber:2,showparent:"",tier:0,unbuyable:"TRUE",verb:"gather",verbone:"gathers"},{column:0,"cost.unittype":"","cost.val":"",description:"The children of your swarm. These young creatures morph into other adult units.",disabled:"",init:10,label:"larva",lol:'Why not "larvas", English?',name:"larva",plural:"larvae","prod.unittype":"","prod.val":"",rowNumber:3,showparent:"invisiblehatchery",tier:"",unbuyable:"TRUE",verb:"birth",verbone:"births"},{column:0,"cost.unittype":"","cost.val":"",description:"Your swarm's military captures territory, fueling your expansion.",disabled:"",init:"",label:"territory",lol:"Your terrifying warriors tear through their foes to capture territory.",name:"territory",plural:"territory","prod.unittype":"","prod.val":"",rowNumber:4,showparent:"",tier:"",unbuyable:"TRUE",verb:"capture",verbone:"captures"},{column:0,"cost.unittype":"","cost.val":"",description:"Allows mutation, increasing the power of each member of your swarm.",disabled:"",init:"",label:"mutagen",lol:"Also creates heroic turtles.",name:"mutagen",plural:"mutagens","prod.unittype":"","prod.val":"",rowNumber:5,showparent:"",tier:"",unbuyable:"TRUE",verb:"",verbone:""},{column:1,"cost.unittype":"meat","cost.val":10,description:"Drones are the lowest class of worker in your swarm. They continuously gather meat to feed your swarm.",disabled:"",init:"",label:"drone",lol:"Not to be confused with probes or mules.",name:"drone",plural:"drones","prod.unittype":"meat","prod.val":1,rowNumber:6,showparent:"",tier:1,unbuyable:"",verb:"hatch",verbone:"hatches"},{column:"","cost.unittype":"larva","cost.val":1,description:"",disabled:"",init:"",label:"",lol:"",name:"drone",plural:"","prod.unittype":"","prod.val":"",rowNumber:7,showparent:"",tier:"",unbuyable:"",verb:"",verbone:""},{column:1,"cost.unittype":"meat","cost.val":810,description:"Queens rule over your swarm's workers.",disabled:"",init:"",label:"queen",lol:"Why do bugs always have queens, but never kings? #mensrights",name:"queen",plural:"queens","prod.unittype":"drone","prod.val":2,rowNumber:8,showparent:"",tier:2,unbuyable:"",verb:"hatch",verbone:"hatches"},{column:"","cost.unittype":"drone","cost.val":100,description:"",disabled:"",init:"",label:"",lol:"",name:"queen",plural:"","prod.unittype":"","prod.val":"",rowNumber:9,showparent:"",tier:"",unbuyable:"",verb:"",verbone:""},{column:"","cost.unittype":"larva","cost.val":1,description:"",disabled:"",init:"",label:"",lol:"",name:"queen",plural:"","prod.unittype":"","prod.val":"",rowNumber:10,showparent:"",tier:"",unbuyable:"",verb:"",verbone:""},{column:1,"cost.unittype":"meat","cost.val":72900,description:"Nests provide space and support for your swarm's queens.",disabled:"",init:"",label:"nest",lol:"They also have fancy temperature controls.",name:"nest",plural:"nests","prod.unittype":"queen","prod.val":3,rowNumber:11,showparent:"",tier:3,unbuyable:"",verb:"build",verbone:"builds"},{column:"","cost.unittype":"queen","cost.val":1e3,description:"",disabled:"",init:"",label:"",lol:"",name:"nest",plural:"","prod.unittype":"","prod.val":"",rowNumber:12,showparent:"",tier:"",unbuyable:"",verb:"",verbone:""},{column:"","cost.unittype":"territory","cost.val":10,description:"",disabled:"",init:"",label:"",lol:"",name:"nest",plural:"","prod.unittype":"","prod.val":"",rowNumber:13,showparent:"",tier:"",unbuyable:"",verb:"",verbone:""},{column:"","cost.unittype":"larva","cost.val":1,description:"",disabled:"",init:"",label:"",lol:"",name:"nest",plural:"","prod.unittype":"","prod.val":"",rowNumber:14,showparent:"",tier:"",unbuyable:"",verb:"",verbone:""},{column:1,"cost.unittype":"meat","cost.val":6561e3,description:"Greater queens rule over the lesser queens of very large swarms.",disabled:"",init:"",label:"greater queen",lol:'Can\'t think of a name? Pick another creature and slap "greater" in front of it!',name:"greaterqueen",plural:"greater queens","prod.unittype":"nest","prod.val":4,rowNumber:15,showparent:"",tier:4,unbuyable:"",verb:"hatch",verbone:"hatches"},{column:"","cost.unittype":"nest","cost.val":1e4,description:"",disabled:"",init:"",label:"",lol:"",name:"greaterqueen",plural:"","prod.unittype":"","prod.val":"",rowNumber:16,showparent:"",tier:"",unbuyable:"",verb:"",verbone:""},{column:"","cost.unittype":"territory","cost.val":50,description:"",disabled:"",init:"",label:"",lol:"",name:"greaterqueen",plural:"","prod.unittype":"","prod.val":"",rowNumber:17,showparent:"",tier:"",unbuyable:"",verb:"",verbone:""},{column:"","cost.unittype":"larva","cost.val":1,description:"",disabled:"",init:"",label:"",lol:"",name:"greaterqueen",plural:"","prod.unittype":"","prod.val":"",rowNumber:18,showparent:"",tier:"",unbuyable:"",verb:"",verbone:""},{column:1,"cost.unittype":"meat","cost.val":59049e4,description:"Hives are huge structures crafted from meat and the bodies of thousands of queens. They allow your swarm to grow even faster.",disabled:"",init:"",label:"hive",lol:"Serve the hive. Feel the groove. I control the way you move.",name:"hive",plural:"hives","prod.unittype":"greaterqueen","prod.val":5,rowNumber:19,showparent:"",tier:5,unbuyable:"",verb:"build",verbone:"builds"},{column:"","cost.unittype":"greaterqueen","cost.val":1e5,description:"",disabled:"",init:"",label:"",lol:"",name:"hive",plural:"","prod.unittype":"","prod.val":"",rowNumber:20,showparent:"",tier:"",unbuyable:"",verb:"",verbone:""},{column:"","cost.unittype":"territory","cost.val":250,description:"",disabled:"",init:"",label:"",lol:"",name:"hive",plural:"","prod.unittype":"","prod.val":"",rowNumber:21,showparent:"",tier:"",unbuyable:"",verb:"",verbone:""},{column:"","cost.unittype":"larva","cost.val":1,description:"",disabled:"",init:"",label:"",lol:"",name:"hive",plural:"","prod.unittype":"","prod.val":"",rowNumber:22,showparent:"",tier:"",unbuyable:"",verb:"",verbone:""},{column:1,"cost.unittype":"meat","cost.val":531441e5,description:"Hive queens oversee the production of hives in the largest swarms.",disabled:"",init:"",label:"hive queen",lol:"Managers managing managers managing managers.",name:"hivequeen",plural:"hive queens","prod.unittype":"hive","prod.val":6,rowNumber:23,showparent:"",tier:6,unbuyable:"",verb:"hatch",verbone:"hatches"},{column:"","cost.unittype":"hive","cost.val":1e6,description:"",disabled:"",init:"",label:"",lol:"",name:"hivequeen",plural:"","prod.unittype":"","prod.val":"",rowNumber:24,showparent:"",tier:"",unbuyable:"",verb:"",verbone:""},{column:"","cost.unittype":"territory","cost.val":1250,description:"",disabled:"",init:"",label:"",lol:"",name:"hivequeen",plural:"","prod.unittype":"","prod.val":"",rowNumber:25,showparent:"",tier:"",unbuyable:"",verb:"",verbone:""},{column:"","cost.unittype":"larva","cost.val":1,description:"",disabled:"",init:"",label:"",lol:"",name:"hivequeen",plural:"","prod.unittype":"","prod.val":"",rowNumber:26,showparent:"",tier:"",unbuyable:"",verb:"",verbone:""},{column:1,"cost.unittype":"meat","cost.val":4782969e6,description:"The mightiest mortal ruler of any swarm.",disabled:"",init:"",label:"hive empress",lol:"On her thorax and on her forewing she has this name written: queen of queens and lady of ladies.",name:"empress",plural:"hive empresses","prod.unittype":"hivequeen","prod.val":7,rowNumber:27,showparent:"",tier:7,unbuyable:"",verb:"grow",verbone:"grows"},{column:"","cost.unittype":"hivequeen","cost.val":1e7,description:"",disabled:"",init:"",label:"",lol:"",name:"empress",plural:"","prod.unittype":"","prod.val":"",rowNumber:28,showparent:"",tier:"",unbuyable:"",verb:"",verbone:""},{column:"","cost.unittype":"territory","cost.val":6250,description:"",disabled:"",init:"",label:"",lol:"",name:"empress",plural:"","prod.unittype":"","prod.val":"",rowNumber:29,showparent:"",tier:"",unbuyable:"",verb:"",verbone:""},{column:"","cost.unittype":"larva","cost.val":1,description:"",disabled:"",init:"",label:"",lol:"",name:"empress",plural:"","prod.unittype":"","prod.val":"",rowNumber:30,showparent:"",tier:"",unbuyable:"",verb:"",verbone:""},{column:1,"cost.unittype":"meat","cost.val":43046721e7,description:"Your swarm begins to look to the heavens for guidance. Prophets foreshadow divine support for your brood.",disabled:"",init:"",label:"hive prophet",lol:"",name:"prophet",plural:"hive prophets","prod.unittype":"empress","prod.val":8,rowNumber:31,showparent:"",tier:8,unbuyable:"",verb:"grow",verbone:"grows"},{column:"","cost.unittype":"empress","cost.val":1e8,description:"",disabled:"",init:"",label:"",lol:"",name:"prophet",plural:"","prod.unittype":"","prod.val":"",rowNumber:32,showparent:"",tier:"",unbuyable:"",verb:"",verbone:""},{column:"","cost.unittype":"territory","cost.val":31250,description:"",disabled:"",init:"",label:"",lol:"",name:"prophet",plural:"","prod.unittype":"","prod.val":"",rowNumber:33,showparent:"",tier:"",unbuyable:"",verb:"",verbone:""},{column:"","cost.unittype":"larva","cost.val":1,description:"",disabled:"",init:"",label:"",lol:"",name:"prophet",plural:"","prod.unittype":"","prod.val":"",rowNumber:34,showparent:"",tier:"",unbuyable:"",verb:"",verbone:""},{column:1,"cost.unittype":"meat","cost.val":38742e12,description:"The prophecies are true! Pleased by your sacrifices, the goddesses have manifest themselves in mortal form to rule over your swarm.",disabled:"",init:"",label:"goddess of the hive",lol:"",name:"goddess",plural:"goddesses of the hive","prod.unittype":"prophet","prod.val":9,rowNumber:35,showparent:"",tier:9,unbuyable:"",verb:"summon",verbone:"summons"},{column:"","cost.unittype":"prophet","cost.val":1e9,description:"",disabled:"",init:"",label:"",lol:"",name:"goddess",plural:"","prod.unittype":"","prod.val":"",rowNumber:36,showparent:"",tier:"",unbuyable:"",verb:"",verbone:""},{column:"","cost.unittype":"territory","cost.val":156250,description:"",disabled:"",init:"",label:"",lol:"",name:"goddess",plural:"","prod.unittype":"","prod.val":"",rowNumber:37,showparent:"",tier:"",unbuyable:"",verb:"",verbone:""},{column:"","cost.unittype":"larva","cost.val":1,description:"",disabled:"",init:"",label:"",lol:"",name:"goddess",plural:"","prod.unittype":"","prod.val":"",rowNumber:38,showparent:"",tier:"",unbuyable:"",verb:"",verbone:""},{column:1,"cost.unittype":"meat","cost.val":348678e13,description:"Entire groups of divine beings have heard your pleas, and lend their support to your swarm.",disabled:"",init:"",label:"brood pantheon",lol:"riot pls",name:"pantheon",plural:"brood pantheons","prod.unittype":"goddess","prod.val":10,rowNumber:39,showparent:"",tier:10,unbuyable:"",verb:"summon",verbone:"summons"},{column:"","cost.unittype":"goddess","cost.val":1e10,description:"",disabled:"",init:"",label:"",lol:"",name:"pantheon",plural:"","prod.unittype":"","prod.val":"",rowNumber:40,showparent:"",tier:"",unbuyable:"",verb:"",verbone:""},{column:"","cost.unittype":"territory","cost.val":781250,description:"",disabled:"",init:"",label:"",lol:"",name:"pantheon",plural:"","prod.unittype":"","prod.val":"",rowNumber:41,showparent:"",tier:"",unbuyable:"",verb:"",verbone:""},{column:"","cost.unittype":"larva","cost.val":1,description:"",disabled:"",init:"",label:"",lol:"",name:"pantheon",plural:"","prod.unittype":"","prod.val":"",rowNumber:42,showparent:"",tier:"",unbuyable:"",verb:"",verbone:""},{column:1,"cost.unittype":"meat","cost.val":313811e15,description:"You win. Honestly, I didn't think anyone would ever see these units. You're either very dedicated or you broke the game, and I'm impressed either way.",disabled:"",init:"",label:"pantheon of pantheons",lol:"A pantheon of pantheons doesn't even make sense, but do you care? Power-up! Power-up!",name:"pantheon2",plural:"pantheons of pantheons","prod.unittype":"pantheon","prod.val":11,rowNumber:43,showparent:"",tier:11,unbuyable:"",verb:"summon",verbone:"summons"},{column:"","cost.unittype":"pantheon","cost.val":1e11,description:"",disabled:"",init:"",label:"",lol:"",name:"pantheon2",plural:"","prod.unittype":"","prod.val":"",rowNumber:44,showparent:"",tier:"",unbuyable:"",verb:"",verbone:""},{column:"","cost.unittype":"territory","cost.val":3906250,description:"",disabled:"",init:"",label:"",lol:"",name:"pantheon2",plural:"","prod.unittype":"","prod.val":"",rowNumber:45,showparent:"",tier:"",unbuyable:"",verb:"",verbone:""},{column:"","cost.unittype":"larva","cost.val":1,description:"",disabled:"",init:"",label:"",lol:"",name:"pantheon2",plural:"","prod.unittype":"","prod.val":"",rowNumber:46,showparent:"",tier:"",unbuyable:"",verb:"",verbone:""},{column:2,"cost.unittype":"meat","cost.val":500,description:"Your swarm's smallest and weakest warriors. They use their teeth and claws to attack foes, and can be vicious in large numbers",disabled:"",init:"",label:"swarmling",lol:"",name:"swarmling",plural:"swarmlings","prod.unittype":"territory","prod.val":.02,rowNumber:47,showparent:"",tier:1,unbuyable:"",verb:"hatch",verbone:"hatches"},{column:"","cost.unittype":"larva","cost.val":1,description:"",disabled:"",init:"",label:"",lol:"",name:"swarmling",plural:"","prod.unittype":"","prod.val":"",rowNumber:48,showparent:"",tier:"",unbuyable:"",verb:"",verbone:""},{column:2,"cost.unittype":"meat","cost.val":72e3,description:"Weak flying warriors. They roam in packs, attacking any threats with venomous stingers.",disabled:"",init:"",label:"stinger",lol:"Reasonably smart critters - they consistently earn a 3.0 GPA.",name:"stinger",plural:"stingers","prod.unittype":"territory","prod.val":.6,rowNumber:49,showparent:"",tier:2,unbuyable:"",verb:"hatch",verbone:"hatches"},{column:"","cost.unittype":"larva","cost.val":1,description:"",disabled:"",init:"",label:"",lol:"",name:"stinger",plural:"","prod.unittype":"","prod.val":"",rowNumber:50,showparent:"",tier:"",unbuyable:"",verb:"",verbone:""},{column:2,"cost.unittype":"meat","cost.val":10368e3,description:"Terrifying eight-legged beasts who leap upon their prey, ensnare it in sticky traps, and finally liquify it into a delicious beverage.",disabled:"",init:"",label:"arachnomorph",lol:"Four legs good. Eight legs better.",name:"spider",plural:"arachnomorphs","prod.unittype":"territory","prod.val":18,rowNumber:51,showparent:"",tier:3,unbuyable:"",verb:"hatch",verbone:"hatches"},{column:"","cost.unittype":"larva","cost.val":1,description:"",disabled:"",init:"",label:"",lol:"",name:"spider",plural:"","prod.unittype":"","prod.val":"",rowNumber:52,showparent:"",tier:"",unbuyable:"",verb:"",verbone:""},{column:2,"cost.unittype":"meat","cost.val":1492992e3,description:"These hated creatures feast on the blood of their victims, and spread disease to larger prey they cannot kill outright.",disabled:"",init:"",label:"culicimorph",lol:"These guys really suck.",name:"mosquito",plural:"culicimorphs","prod.unittype":"territory","prod.val":540,rowNumber:53,showparent:"",tier:4,unbuyable:"",verb:"hatch",verbone:"hatches"},{column:"","cost.unittype":"larva","cost.val":1,description:"",disabled:"",init:"",label:"",lol:"",name:"mosquito",plural:"","prod.unittype":"","prod.val":"",rowNumber:54,showparent:"",tier:"",unbuyable:"",verb:"",verbone:""},{column:2,"cost.unittype":"meat","cost.val":214990848e3,description:"Groups of hungry locusts devour any creature who makes the mistake of standing in their way.",disabled:"",init:"",label:"locust",lol:"Preceded by fiery hail, followed by darkness.",name:"locust",plural:"locusts","prod.unittype":"territory","prod.val":16200,rowNumber:55,showparent:"",tier:5,unbuyable:"",verb:"hatch",verbone:"hatches"},{column:"","cost.unittype":"larva","cost.val":1,description:"",disabled:"",init:"",label:"",lol:"",name:"locust",plural:"","prod.unittype":"","prod.val":"",rowNumber:56,showparent:"",tier:"",unbuyable:"",verb:"",verbone:""},{column:2,"cost.unittype":"meat","cost.val":30958682112e3,description:"The hard shell of the roach makes it a fearsome opponent; it is nearly impossible to kill.",disabled:"",init:"",label:"roach",lol:"ROOSTERS.",name:"roach",plural:"roaches","prod.unittype":"territory","prod.val":486e3,rowNumber:57,showparent:"",tier:6,unbuyable:"",verb:"hatch",verbone:"hatches"},{column:"","cost.unittype":"larva","cost.val":1,description:"",disabled:"",init:"",label:"",lol:"",name:"roach",plural:"","prod.unittype":"","prod.val":"",rowNumber:58,showparent:"",tier:"",unbuyable:"",verb:"",verbone:""},{column:2,"cost.unittype":"meat","cost.val":445805e10,description:"The larger, and more fearsome, cousin of the arachnomorph.",disabled:"",init:"",label:"giant arachnomorph",lol:"",name:"giantspider",plural:"giant arachnomorphs","prod.unittype":"territory","prod.val":1458e4,rowNumber:59,showparent:"",tier:7,unbuyable:"",verb:"hatch",verbone:"hatches"},{column:"","cost.unittype":"larva","cost.val":"",description:"",disabled:"",init:"",label:"",lol:"",name:"giantspider",plural:"","prod.unittype":"","prod.val":"",rowNumber:60,showparent:"",tier:"",unbuyable:"",verb:"",verbone:""},{column:2,"cost.unittype":"meat","cost.val":641959e12,description:"Swift wormlike creatures with hundreds of legs and an extremely venomous bite.",disabled:"",init:"",label:"chilopodomorph",lol:"Hi Mom!",name:"centipede",plural:"chilopodomorphs","prod.unittype":"territory","prod.val":4374e5,rowNumber:61,showparent:"",tier:8,unbuyable:"",verb:"hatch",verbone:"hatches"},{column:"","cost.unittype":"larva","cost.val":1,description:"",disabled:"",init:"",label:"",lol:"",name:"centipede",plural:"","prod.unittype":"","prod.val":"",rowNumber:62,showparent:"",tier:"",unbuyable:"",verb:"",verbone:""},{column:2,"cost.unittype":"meat","cost.val":924421e14,description:"",disabled:"",init:"",label:"wasp",lol:"",name:"wasp",plural:"wasps","prod.unittype":"territory","prod.val":13122e6,rowNumber:63,showparent:"",tier:9,unbuyable:"",verb:"hatch",verbone:"hatches"},{column:"","cost.unittype":"larva","cost.val":1,description:"",disabled:"",init:"",label:"",lol:"",name:"wasp",plural:"","prod.unittype":"","prod.val":"",rowNumber:64,showparent:"",tier:"",unbuyable:"",verb:"",verbone:""},{column:2,"cost.unittype":"meat","cost.val":1.33117e22,description:"Huge burrowing worms, devourers appear from beneath the earth to swallow their prey before it can react.",disabled:"",init:"",label:"devourer",lol:"Extra fun in hardcore leagues and fractured maps.",name:"devourer",plural:"devourers","prod.unittype":"territory","prod.val":39366e7,rowNumber:65,showparent:"",tier:10,unbuyable:"",verb:"hatch",verbone:"hatches"},{column:"","cost.unittype":"larva","cost.val":1,description:"",disabled:"",init:"",label:"",lol:"",name:"devourer",plural:"","prod.unittype":"","prod.val":"",rowNumber:66,showparent:"",tier:"",unbuyable:"",verb:"",verbone:""},{column:2,"cost.unittype":"meat","cost.val":1.91688e24,description:"",disabled:"",init:"",label:"goon",lol:"Likes spreadsheets and spaceships. Dislikes high taxes.",name:"goon",plural:"goons","prod.unittype":"territory","prod.val":118098e8,rowNumber:67,showparent:"",tier:11,unbuyable:"",verb:"hatch",verbone:"hatches"},{column:"","cost.unittype":"larva","cost.val":1,description:"",disabled:"",init:"",label:"",lol:"",name:"goon",plural:"","prod.unittype":"","prod.val":"",rowNumber:68,showparent:"",tier:"",unbuyable:"",verb:"",verbone:""}],name:"unittypes"},upgrades:{column_names:["name","label","description","lol","maxlevel","unittype","requires.unittype","requires.val","cost.unittype","cost.val","cost.factor","effect.type","effect.unittype","effect.val","effect.stat"],elements:[{"cost.factor":100,"cost.unittype":"meat","cost.val":300,description:"Produce 1 more larvae per second.","effect.stat":"base","effect.type":"addStat","effect.unittype":"invisiblehatchery","effect.val":1,label:"hatchery",lol:"",maxlevel:"",name:"hatchery","requires.unittype":"","requires.val":"",rowNumber:1,unittype:"invisiblehatchery"},{"cost.factor":1.35,"cost.unittype":"territory","cost.val":100,description:"Larvae production increased by 10%.","effect.stat":"prod","effect.type":"multStat","effect.unittype":"invisiblehatchery","effect.val":1.1,label:"expansion",lol:"",maxlevel:"",name:"expansion","requires.unittype":"","requires.val":"",rowNumber:2,unittype:"invisiblehatchery"},{"cost.factor":111,"cost.unittype":"meat","cost.val":7e3,description:"Use meat to instantly create 1,000 larvae. Any existing larvae are cloned.","effect.stat":"","effect.type":"compoundUnit","effect.unittype":"larva","effect.val":2,label:"inject larvae",lol:"",maxlevel:"",name:"injectlarvae","requires.unittype":"","requires.val":"",rowNumber:3,unittype:"invisiblehatchery"},{"cost.factor":"","cost.unittype":"","cost.val":"",description:"","effect.stat":"","effect.type":"addUnit","effect.unittype":"larva","effect.val":1e3,label:"",lol:"",maxlevel:"",name:"injectlarvae","requires.unittype":"","requires.val":"",rowNumber:4,unittype:""},{"cost.factor":666,"cost.unittype":"drone","cost.val":66,description:"Drones gather more meat.","effect.stat":"prod","effect.type":"multStat","effect.unittype":"drone","effect.val":2,label:"faster drones",lol:"",maxlevel:"",name:"droneprod","requires.unittype":"","requires.val":"",rowNumber:5,unittype:"drone"},{"cost.factor":666,"cost.unittype":"queen","cost.val":66,description:"Queens produce more drones.","effect.stat":"prod","effect.type":"multStat","effect.unittype":"queen","effect.val":2,label:"faster queens",lol:"",maxlevel:"",name:"queenprod","requires.unittype":"","requires.val":"",rowNumber:6,unittype:"queen"},{"cost.factor":666,"cost.unittype":"nest","cost.val":66,description:"Nests produce more queens.","effect.stat":"prod","effect.type":"multStat","effect.unittype":"nest","effect.val":2,label:"faster nests",lol:"",maxlevel:"",name:"nestprod","requires.unittype":"","requires.val":"",rowNumber:7,unittype:"nest"},{"cost.factor":666,"cost.unittype":"greaterqueen","cost.val":66,description:"Greater queens produce more nests.","effect.stat":"prod","effect.type":"multStat","effect.unittype":"greaterqueen","effect.val":2,label:"faster greater queens",lol:"",maxlevel:"",name:"greaterqueenprod","requires.unittype":"","requires.val":"",rowNumber:8,unittype:"greaterqueen"},{"cost.factor":666,"cost.unittype":"hive","cost.val":66,description:"Hives produce more greater queens.","effect.stat":"prod","effect.type":"multStat","effect.unittype":"hive","effect.val":2,label:"faster hives",lol:"",maxlevel:"",name:"hiveprod","requires.unittype":"","requires.val":"",rowNumber:9,unittype:"hive"},{"cost.factor":666,"cost.unittype":"hivequeen","cost.val":66,description:"Hive queens produce more hives.","effect.stat":"prod","effect.type":"multStat","effect.unittype":"hivequeen","effect.val":2,label:"faster hive queens",lol:"",maxlevel:"",name:"hivequeenprod","requires.unittype":"","requires.val":"",rowNumber:10,unittype:"hivequeen"},{"cost.factor":666,"cost.unittype":"empress","cost.val":66,description:"Hive empresses produce more hive queens.","effect.stat":"prod","effect.type":"multStat","effect.unittype":"empress","effect.val":2,label:"faster hive empresses",lol:"",maxlevel:"",name:"empressprod","requires.unittype":"","requires.val":"",rowNumber:11,unittype:"empress"},{"cost.factor":666,"cost.unittype":"prophet","cost.val":66,description:"Hive prophets produce more hive empresses.","effect.stat":"prod","effect.type":"multStat","effect.unittype":"prophet","effect.val":2,label:"faster hive prophets",lol:"",maxlevel:"",name:"prophetprod","requires.unittype":"","requires.val":"",rowNumber:12,unittype:"prophet"},{"cost.factor":666,"cost.unittype":"goddess","cost.val":66,description:"Goddesses of the hive produce more hive prophets.","effect.stat":"prod","effect.type":"multStat","effect.unittype":"goddess","effect.val":2,label:"faster goddesses of the hive",lol:"",maxlevel:"",name:"goddessprod","requires.unittype":"","requires.val":"",rowNumber:13,unittype:"goddess"},{"cost.factor":666,"cost.unittype":"pantheon","cost.val":66,description:"Brood pantheons produce more goddesses of the hive.","effect.stat":"prod","effect.type":"multStat","effect.unittype":"pantheon","effect.val":2,label:"faster brood pantheons",lol:"",maxlevel:"",name:"pantheonprod","requires.unittype":"","requires.val":"",rowNumber:14,unittype:"pantheon"},{"cost.factor":666,"cost.unittype":"pantheon2","cost.val":66,description:"Pantheons of pantheons produce more pantheons.","effect.stat":"prod","effect.type":"multStat","effect.unittype":"pantheon2","effect.val":2,label:"faster pantheon of pantheons",lol:"Wow, could that description be any worse?",maxlevel:"",name:"pantheon2prod","requires.unittype":"","requires.val":"",rowNumber:15,unittype:"pantheon2"},{"cost.factor":500,"cost.unittype":"drone","cost.val":50,description:"Multiple drones hatch from each larvae. (This does not affect queen production.)","effect.stat":"twin","effect.type":"multStat","effect.unittype":"drone","effect.val":2,label:"twin drones",lol:"",maxlevel:"",name:"dronetwin","requires.unittype":"queen","requires.val":1,rowNumber:16,unittype:"drone"},{"cost.factor":500,"cost.unittype":"queen","cost.val":500,description:"Multiple queens hatch from each larvae. (This does not affect nest production.)","effect.stat":"twin","effect.type":"multStat","effect.unittype":"queen","effect.val":2,label:"twin queens",lol:"",maxlevel:"",name:"queentwin","requires.unittype":"nest","requires.val":1,rowNumber:17,unittype:"queen"},{"cost.factor":500,"cost.unittype":"nest","cost.val":500,description:"Multiple nests are constructed from each larvae. (This does not affect greater queen production.)","effect.stat":"twin","effect.type":"multStat","effect.unittype":"nest","effect.val":2,label:"twin nests",lol:"",maxlevel:"",name:"nesttwin","requires.unittype":"greaterqueen","requires.val":1,rowNumber:18,unittype:"nest"},{"cost.factor":500,"cost.unittype":"greaterqueen","cost.val":500,description:"Multiple greater queens hatch from each larvae. (This does not affect hive production.)","effect.stat":"twin","effect.type":"multStat","effect.unittype":"greaterqueen","effect.val":2,label:"twin greater queens",lol:"",maxlevel:"",name:"greaterqueentwin","requires.unittype":"hive","requires.val":1,rowNumber:19,unittype:"greaterqueen"},{"cost.factor":500,"cost.unittype":"hive","cost.val":500,description:"Multiple hives are constructed from each larvae. (This does not affect hive queen production.)","effect.stat":"twin","effect.type":"multStat","effect.unittype":"hive","effect.val":2,label:"twin hives",lol:"",maxlevel:"",name:"hivetwin","requires.unittype":"hivequeen","requires.val":1,rowNumber:20,unittype:"hive"},{"cost.factor":500,"cost.unittype":"hivequeen","cost.val":500,description:"Multiple hive queens are constructed from each larvae. (This does not affect hive empress production.)","effect.stat":"twin","effect.type":"multStat","effect.unittype":"hivequeen","effect.val":2,label:"twin hive queens",lol:"",maxlevel:"",name:"hivequeentwin","requires.unittype":"empress","requires.val":1,rowNumber:21,unittype:"hivequeen"},{"cost.factor":500,"cost.unittype":"empress","cost.val":500,description:"Multiple hive empresses hatch from each larvae. (This does not affect hive prophet production.)","effect.stat":"twin","effect.type":"multStat","effect.unittype":"empress","effect.val":2,label:"twin hive empresses",lol:"",maxlevel:"",name:"empresstwin","requires.unittype":"prophet","requires.val":1,rowNumber:22,unittype:"empress"},{"cost.factor":500,"cost.unittype":"prophet","cost.val":500,description:"Multiple hive prophets hatch from each larvae. (This does not affect goddess of the hive production.)","effect.stat":"twin","effect.type":"multStat","effect.unittype":"prophet","effect.val":2,label:"twin hive prophets",lol:"",maxlevel:"",name:"prophettwin","requires.unittype":"goddess","requires.val":1,rowNumber:23,unittype:"prophet"},{"cost.factor":500,"cost.unittype":"goddess","cost.val":500,description:"Multiple goddesses of the hive are summoned by each larvae. (This does not affect brood pantheon production.)","effect.stat":"twin","effect.type":"multStat","effect.unittype":"goddess","effect.val":2,label:"twin goddesses of the hive",lol:"",maxlevel:"",name:"goddesstwin","requires.unittype":"pantheon","requires.val":1,rowNumber:24,unittype:"goddess"},{"cost.factor":500,"cost.unittype":"pantheon","cost.val":500,description:"Multiple brood pantheons are created from each larvae. (This does not affect pantheon of pantheons production.)","effect.stat":"twin","effect.type":"multStat","effect.unittype":"pantheon","effect.val":2,label:"twin brood pantheons",lol:"",maxlevel:"",name:"pantheontwin","requires.unittype":"pantheon2","requires.val":1,rowNumber:25,unittype:"pantheon"},{"cost.factor":500,"cost.unittype":"pantheon2","cost.val":500,description:"Multiple pantheons of pantheons are created from each larvae.","effect.stat":"twin","effect.type":"multStat","effect.unittype":"pantheon2","effect.val":2,label:"twin pantheon of pantheons",lol:"",maxlevel:"",name:"pantheon2twin","requires.unittype":"","requires.val":"",rowNumber:26,unittype:"pantheon2"},{"cost.factor":7,"cost.unittype":"swarmling","cost.val":1,description:"Multiple swarmlings hatch from each larvae.","effect.stat":"twin","effect.type":"multStat","effect.unittype":"swarmling","effect.val":2,label:"twin swarmlings",lol:"",maxlevel:"",name:"swarmlingtwin","requires.unittype":"","requires.val":"",rowNumber:27,unittype:"swarmling"},{"cost.factor":42,"cost.unittype":"meat","cost.val":100,description:"","effect.stat":"","effect.type":"","effect.unittype":"","effect.val":"",label:"",lol:"",maxlevel:"",name:"swarmlingtwin","requires.unittype":"","requires.val":"",rowNumber:28,unittype:""},{"cost.factor":7,"cost.unittype":"stinger","cost.val":1,description:"Multiple stingers hatch from each larvae.","effect.stat":"twin","effect.type":"multStat","effect.unittype":"stinger","effect.val":2,label:"twin stingers",lol:"",maxlevel:"",name:"stingertwin","requires.unittype":"","requires.val":"",rowNumber:29,unittype:"stinger"},{"cost.factor":43,"cost.unittype":"meat","cost.val":17e3,description:"","effect.stat":"","effect.type":"","effect.unittype":"","effect.val":"",label:"",lol:"",maxlevel:"",name:"stingertwin","requires.unittype":"","requires.val":"",rowNumber:30,unittype:""},{"cost.factor":7,"cost.unittype":"spider","cost.val":1,description:"Multiple arachnomorphs hatch from each larvae.","effect.stat":"twin","effect.type":"multStat","effect.unittype":"spider","effect.val":2,label:"twin arachnomorphs",lol:"",maxlevel:"",name:"spidertwin","requires.unittype":"","requires.val":"",rowNumber:31,unittype:"spider"},{"cost.factor":44,"cost.unittype":"meat","cost.val":187e4,description:"","effect.stat":"","effect.type":"","effect.unittype":"","effect.val":"",label:"",lol:"",maxlevel:"",name:"spidertwin","requires.unittype":"","requires.val":"",rowNumber:32,unittype:""},{"cost.factor":7,"cost.unittype":"mosquito","cost.val":1,description:"Multiple culicimorphs hatch from each larvae.","effect.stat":"twin","effect.type":"multStat","effect.unittype":"mosquito","effect.val":2,label:"twin culicimorphs",lol:"",maxlevel:"",name:"mosquitotwin","requires.unittype":"","requires.val":"",rowNumber:33,unittype:"mosquito"},{"cost.factor":45,"cost.unittype":"meat","cost.val":2057e5,description:"","effect.stat":"","effect.type":"","effect.unittype":"","effect.val":"",label:"",lol:"",maxlevel:"",name:"mosquitotwin","requires.unittype":"","requires.val":"",rowNumber:34,unittype:""},{"cost.factor":7,"cost.unittype":"locust","cost.val":1,description:"Multiple locusts hatch from each larvae.","effect.stat":"twin","effect.type":"multStat","effect.unittype":"locust","effect.val":2,label:"twin locusts",lol:"",maxlevel:"",name:"locusttwin","requires.unittype":"","requires.val":"",rowNumber:35,unittype:"locust"},{"cost.factor":46,"cost.unittype":"meat","cost.val":22627e6,description:"","effect.stat":"","effect.type":"","effect.unittype":"","effect.val":"",label:"",lol:"",maxlevel:"",name:"locusttwin","requires.unittype":"","requires.val":"",rowNumber:36,unittype:""},{"cost.factor":7,"cost.unittype":"roach","cost.val":1,description:"Multiple roaches hatch from each larvae.","effect.stat":"twin","effect.type":"multStat","effect.unittype":"roach","effect.val":2,label:"twin roaches",lol:"",maxlevel:"",name:"roachtwin","requires.unittype":"","requires.val":"",rowNumber:37,unittype:"roach"},{"cost.factor":47,"cost.unittype":"meat","cost.val":248897e7,description:"","effect.stat":"","effect.type":"","effect.unittype":"","effect.val":"",label:"",lol:"",maxlevel:"",name:"roachtwin","requires.unittype":"","requires.val":"",rowNumber:38,unittype:""},{"cost.factor":7,"cost.unittype":"giantspider","cost.val":1,description:"Multiple giant arachnomorphs hatch from each larvae.","effect.stat":"twin","effect.type":"multStat","effect.unittype":"giantspider","effect.val":2,label:"twin giant arachnomorphs",lol:"",maxlevel:"",name:"giantspidertwin","requires.unittype":"","requires.val":"",rowNumber:39,unittype:"giantspider"},{"cost.factor":48,"cost.unittype":"meat","cost.val":2737867e8,description:"","effect.stat":"","effect.type":"","effect.unittype":"","effect.val":"",label:"",lol:"",maxlevel:"",name:"giantspidertwin","requires.unittype":"","requires.val":"",rowNumber:40,unittype:""},{"cost.factor":7,"cost.unittype":"centipede","cost.val":1,description:"Multiple chilopodomorphs hatch from each larvae.","effect.stat":"twin","effect.type":"multStat","effect.unittype":"centipede","effect.val":2,label:"twin chilopodomorphs",lol:"",maxlevel:"",name:"centipedetwin","requires.unittype":"","requires.val":"",rowNumber:41,unittype:"centipede"},{"cost.factor":49,"cost.unittype":"meat","cost.val":301165e11,description:"","effect.stat":"","effect.type":"","effect.unittype":"","effect.val":"",label:"",lol:"",maxlevel:"",name:"centipedetwin","requires.unittype":"","requires.val":"",rowNumber:42,unittype:""},{"cost.factor":7,"cost.unittype":"wasp","cost.val":1,description:"Multiple wasps hatch from each larvae.","effect.stat":"twin","effect.type":"multStat","effect.unittype":"wasp","effect.val":2,label:"twin wasps",lol:"",maxlevel:"",name:"wasptwin","requires.unittype":"","requires.val":"",rowNumber:43,unittype:"wasp"},{"cost.factor":50,"cost.unittype":"meat","cost.val":331282e13,description:"","effect.stat":"","effect.type":"","effect.unittype":"","effect.val":"",label:"",lol:"",maxlevel:"",name:"wasptwin","requires.unittype":"","requires.val":"",rowNumber:44,unittype:""},{"cost.factor":7,"cost.unittype":"devourer","cost.val":1,description:"Multiple devourers hatch from each larvae.","effect.stat":"twin","effect.type":"multStat","effect.unittype":"devourer","effect.val":2,label:"twin devourers",lol:"",maxlevel:"",name:"devourertwin","requires.unittype":"","requires.val":"",rowNumber:45,unittype:"devourer"},{"cost.factor":51,"cost.unittype":"meat","cost.val":36441e16,description:"","effect.stat":"","effect.type":"","effect.unittype":"","effect.val":"",label:"",lol:"",maxlevel:"",name:"devourertwin","requires.unittype":"","requires.val":"",rowNumber:46,unittype:""},{"cost.factor":7,"cost.unittype":"goon","cost.val":1,description:"Multiple goons hatch from each larvae.","effect.stat":"twin","effect.type":"multStat","effect.unittype":"goon","effect.val":2,label:"twin goons",lol:"",maxlevel:"",name:"goontwin","requires.unittype":"","requires.val":"",rowNumber:47,unittype:"goon"},{"cost.factor":52,"cost.unittype":"meat","cost.val":4.00851e22,description:"","effect.stat":"","effect.type":"","effect.unittype":"","effect.val":"",label:"",lol:"",maxlevel:"",name:"goontwin","requires.unittype":"","requires.val":"",rowNumber:48,unittype:""}],name:"upgrades"}}),function(){"use strict";
angular.module("swarmApp").factory("session",["env","$rootScope",function(a,b){var c,d;return c=btoa("Cheater :(\n\n"),new(d=function(){function a(){this.reset()}return a.prototype.reset=function(){var a;return this.id=0,this.unittypes={},a=new Date,this.date={started:a,restarted:a,saved:a,loaded:a,reified:a},this.options={},this.upgrades={},this.statistics={},b.$emit("reset",{session:this})},a.prototype._replacer=function(a,b){return b},a.prototype._reviver=function(a,b){return b},a.prototype.jsonSaves=function(a){return null==a&&(a=this),JSON.stringify(a,this._replacer)},a.prototype._saves=function(a,b){var d;return null==a&&(a=this),null==b&&(b=!0),console.assert(null==this._exportCache,"exportCache is defined while saving: saves will contain saves. Uh-oh."),b&&(a.date.saved=new Date,delete a.date.loaded),d=this.jsonSaves(a),d=LZString.compressToBase64(d),d=c+d},a.prototype._loads=function(a){var b,d,e,f;a=a.substring(c.length),a=LZString.decompressFromBase64(a),d=JSON.parse(a,this._reviver),f=d.date;for(b in f)e=f[b],d.date[b]=new Date(e);return d.date.loaded=new Date,d},a.prototype.exportSave=function(){return null==this._exportCache&&(this._exportCache=this._saves(void 0,!1)),this._exportCache},a.prototype.importSave=function(a){var b;return b=this._loads(a),_.extend(this,b),this._exportCache=a},a.prototype.save=function(){return delete this._exportCache,this._exportCache=this._saves(),localStorage.setItem(this.id,this._exportCache),b.$emit("save",this)},a.prototype.load=function(a){return null==a&&(a=0),this.importSave(localStorage.getItem(a))},a}())}])}.call(this),function(){"use strict";angular.module("swarmApp").controller("DebugCtrl",["$scope","session","game","spreadsheet","env","unittypes",function(a,b,c,d,e,f){return a.dumps=[{title:"env",data:e},{title:"game",data:!!c},{title:"session",data:b},{title:"unittypes",data:!!f},{title:"spreadsheet",data:d}],a.throwUp=function(){throw new Error("throwing up (test exception)")},a.session=b,a.game=c,a.env=e,a.confirmReset=function(){return confirm("You will lose everything and restart the game. You sure?")?c.reset():void 0}}])}.call(this),function(){"use strict";angular.module("swarmApp").value("lazySpreadsheetUrl","https://docs.google.com/spreadsheets/d/1FgPdB1RzwCvK_gvfFuf0SU9dWJbAmYtewF8A-4SEIZM/pubhtml"),angular.module("swarmApp").factory("lazySpreadsheet",["$q","lazySpreadsheetUrl",function(a){var b;return b=a.defer(),Tabletop.init({key:spreadsheetUrl,parseNumbers:!0,debug:!0,callback:function(a,c){return b.resolve({data:a,tabletop:c})}}),b.promise}]),angular.module("swarmApp").factory("spreadsheet",["spreadsheetPreload",function(a){return{data:a}}])}.call(this),function(){"use strict";angular.module("swarmApp").filter("bignum",function(){return function(a){return a=Math.floor(a),1e5>a?a.toLocaleString():a.toExponential(2)}})}.call(this),function(){"use strict";var a=[].slice;angular.module("swarmApp").factory("spreadsheetUtil",["util",function(b){var c;return new(c=function(){function c(){}return c.prototype.defaultFilter=function(a){return!!a||_.isNumber(a)},c.prototype.setNested=function(b,c,d){var e,f,g,h,i,j,k;for(k=c,c=2<=k.length?a.call(k,0,h=k.length-1):(h=0,[]),f=k[h++],e=b,i=0,j=c.length;j>i;i++)g=c[i],null==e[g]&&(e[g]={}),e=e[g];return e[f]=d,b},c.prototype.getNested=function(a,b){var c,d,e,f;for(c=a,e=0,f=b.length;f>e;e++)d=b[e],c=c[d];return c},c.prototype.normalizeRow=function(a,b){var c,d,e,f;null==b&&(b=this.defaultFilter),e={};for(c in a)f=a[c],b(f)&&(d=c.split("."),this.setNested(e,d,f));return e},c.prototype.normalizeRows=function(a,b){var c,d,e,f;for(null==b&&(b=this.defaultFilter),f=[],d=0,e=a.length;e>d;d++)c=a[d],f.push(this.normalizeRow(c,b));return f},c.prototype.groupRows=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q;null==c&&(c=this.defaultFilter),m=[];for(f in a){if(i=a[f],e=_.groupBy(b,f),l=_.uniq(_.map(b,f)),_.isString(i)&&(i=[i]),!_.isArray(i))throw new Error("groupRows: nested groupings not supported yet");for(n=0,p=l.length;p>n;n++)for(g=l[n],d=e[g],m.push(k=_.clone(d[0])),o=0,q=i.length;q>o;o++)h=i[o],j=_.pluck(d,h),k[h]=_.filter(j,c)}return m},c.prototype.parseRows=function(a,b,c){var d;return null==c&&(c=this.defaultFilter),d=this.normalizeRows(b,c),this.groupRows(a,d,c)},c.prototype.resolveList=function(a,c,d){var e,f,g,h,i;for(i=[],g=0,h=a.length;h>g;g++)f=a[g],e=f[c],f[c]=d[e],i.push(b.assert(f[c],"couldn't resolve ref: "+f+"."+c+"="+e,f,c,e,d[e],a));return i},c}())}])}.call(this),function(){"use strict";angular.module("swarmApp").config(["$provide",function(){}])}.call(this),function(){"use strict";angular.module("swarmApp").factory("UnitType",function(){var a;return a=function(){function a(a){_.extend(this,a),this.producerPath={},this.producerPathList=[]}return a.prototype.producerNames=function(){return _.mapValues(this.producerPath,function(a){return _.map(a,function(a){return _.pluck(a,"name")})})},a}()}),angular.module("swarmApp").factory("UnitTypes",["spreadsheetUtil","UnitType",function(a,b){var c;return c=function(){function c(a){var b,c,d;for(null==a&&(a=[]),this.list=[],this.byName={},c=0,d=a.length;d>c;c++)b=a[c],this.register(b)}return c.prototype.register=function(a){return this.list.push(a),this.byName[a.name]=a},c._buildProducerPath=function(a,b,c){var d,e,f,g,h,i,j;for(c=[b].concat(c),a.producerPathList.push(c),null==(e=a.producerPath)[h=b.name]&&(e[h]=[]),a.producerPath[b.name].push(c),i=b.producedBy,j=[],f=0,g=i.length;g>f;f++)d=i[f],j.push(this._buildProducerPath(a,d,c));return j},c.parseSpreadsheet=function(d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y;for(i=a.parseRows({name:["cost","prod"]},d.data.unittypes.elements),g=new c(function(){var a,c,d;for(d=[],a=0,c=i.length;c>a;a++)h=i[a],d.push(new b(h));return d}()),u=g.list,k=0,o=u.length;o>k;k++)j=u[k],j.producedBy=[];for(v=g.list,l=0,p=v.length;p>l;l++)for(j=v[l],j.showparent&&a.resolveList([j],"showparent",g.byName),a.resolveList(j.cost,"unittype",g.byName),a.resolveList(j.prod,"unittype",g.byName),w=j.prod,m=0,q=w.length;q>m;m++)e=w[m],e.unittype.producedBy.push(j);for(x=g.list,n=0,r=x.length;r>n;n++)for(j=x[n],y=j.producedBy,t=0,s=y.length;s>t;t++)f=y[t],this._buildProducerPath(j,f,[]);return g},c}()}]),angular.module("swarmApp").factory("unittypes",["UnitTypes","spreadsheet",function(a,b){return a.parseSpreadsheet(b)}])}.call(this),function(){"use strict";angular.module("swarmApp").controller("UnitlistCtrl",["$scope","$routeParams","$location","$filter","$interval","game","options","commands",function(a,b,c,d,e,f,g,h){var i,j,k,l,m,n,o;for(a.game=f,a.commands=h,a.action="select",a.buynum=1,a.mainBuynum=1,a.selected=null!=b.unit?a.game.unit(b.unit):null,i=e(function(){return function(){return a.game.tick()}}(this),g.fpsSleepMillis()),a.$on("$destroy",function(){return function(){return e.cancel(i)}}(this)),a.decimals=function(a){return a>100?Math.floor(a):a.toPrecision(3).replace(/\.?0+$/,"")},k={},o=a.game.unitlist(),l=0,m=o.length;m>l;l++)j=o[l],null==k[n=j.unittype.column]&&(k[n]=[]),k[j.unittype.column].push(j);return a.visibleUnitGroup=function(a){var b,c,d,e,f;for(e=null!=(d=k[a])?d:[],f=[],b=0,c=e.length;c>b;b++)j=e[b],j.isVisible()&&f.push(j);return f},a.isVisible=function(a){return a.isVisible()},a.select=function(b){return a.selected=b},a.costText=function(a){var b,c,e;return e=function(){var e,f;e=a.cost,f=[];for(c in e)b=e[c],f.push(""+d("bignum")(b.val)+" "+b.unit.unittype.plural);return f}(),e=e.join(", "),e&&(e="Cost: "+e),e},a.welcomeBackText=function(){return""},a.emptyText=function(){},a.tutText=function(){var a,b;if(a=f.countUnits(),b=f.countUpgrades(),b.expansion>=5)return null;if(b.expansion>0)return"Expansion is the key to growing your swarm rapidly. Build a large military to expand your territory and produce more larvae. Build more queens and, eventually, nests to produce more meat for your military.";if(b.hatchery>0){if(a.queen>=5)return a.territory>50?"Your warriors have captured a lot of territory, and soon you can secure your first expansion. Expansions increase larvae production. Select 'Larva' to expand.":a.territory>0?"Your warriors have slowly begun securing territory. Continue expanding your military.":"Queens have rapidly grown your swarm, and your growth demands more territory. Begin capturing territory by building military units - swarmlings or stingers.";if(a.queen>0)return'Hatch more queens to grow your swarm. Hatching drones with the "Twin Drones" upgrade will allow you to rapidly raise more queens.'}return a.drone>=10?b.hatchery>0?"You lead a small brood of worker drones. They long for a queen. You must sacrifice many drones to hatch a queen, but once born, your queen will slowly hatch drones without consuming meat or larvae.":"You lead a small brood of worker drones. Once you have plenty of meat, upgrade your hatchery to produce more larvae by selecting 'Larva' and spending some meat.":a.drone>0?"You lead a small brood of worker drones. Drones gather meat. Use this meat to build more drones and expand your brood.":"Your brood starts its life with a small pile of meat and a single larvae-producing hatchery. Larvae mutate into other units. Begin your growth by using your meat and larvae to hatch some drones."},a.click=function(b){return a[a.action](b)}}])}.call(this),function(){"use strict";angular.module("swarmApp").controller("HeaderCtrl",["$scope","$window","env","version","session","analytics","statistics",function(a,b,c,d,e){return a.env=c,a.version=d,a.session=e,a.feedbackUrl=function(){var b,c;return b=""+d+"|"+("undefined"!=typeof window&&null!==window&&null!=(c=window.navigator)?c.userAgent:void 0)+"|"+a.session.exportSave(),"https://docs.google.com/forms/d/1yH2oNcjUJiggxQhoP3pwijWU-nZkT-hJsqOR-5_cwrI/viewform?entry.436676437="+encodeURIComponent(b)},a.isNonprod=function(){return a.env&&"prod"!==a.env}}])}.call(this),function(){"use strict";angular.module("swarmApp").factory("Effect",["util",function(a){var b;return b=function(){function b(b,c,d){this.game=b,this.upgrade=c,_.extend(this,d),null!=d.unittype&&(this.unit=a.assert(this.game.unit(d.unittype)))}return b.prototype.onBuy=function(){var a;return"function"==typeof(a=this.type).onBuy?a.onBuy(this,this.game,this.upgrade):void 0},b.prototype.calcStats=function(a,b,c){var d;return"function"==typeof(d=this.type).calcStats?d.calcStats(this,a,b,c):void 0},b}()}]),angular.module("swarmApp").factory("Upgrade",["util","Effect",function(a,b){var c;return c=function(){function c(b,c){this.game=b,this.type=c,this.name=this.type.name,this.unit=a.assert(this.game.unit(this.type.unittype)),this._totalCost=_.memoize(this._totalCost)}return c.prototype._init=function(){return this._cost=_.map(this.type.cost,function(b){return function(c){var d;return a.assert(c.unittype,"upgrade cost without a unittype",b.name,name,c),d=_.clone(c),d.unit=a.assert(b.game.unit(c.unittype)),d}}(this)),this.requires=_.map(this.type.requires,function(b){return function(c){var d;return a.assert(c.unittype,"upgrade require without a unittype",b.name,name,c),d=_.clone(c),d.unit=a.assert(b.game.unit(c.unittype)),d}}(this)),this.effect=_.map(this.type.effect,function(a){return function(c){return new b(a.game,a,c)}}(this))},c.prototype.count=function(){var a;return null!=(a=this.game.session.upgrades[this.name])?a:0},c.prototype._setCount=function(b){return this.game.session.upgrades[this.name]=b,a.clearMemoCache(this._totalCost,this.unit._stats)},c.prototype._addCount=function(a){return this._setCount(this.count()+a)},c.prototype._subtractCount=function(a){return this._addCount(-a)},c.prototype.isVisible=function(){return this.type.disabled?!1:this._visible?!0:this._visible=this._isVisible()},c.prototype._isVisible=function(){var a,b,c,d;if(this.count()>0)return!0;for(d=this.requires,b=0,c=d.length;c>b;b++)if(a=d[b],a.val>a.unit.count())return!1;return!0},c.prototype.totalCost=function(){return this._totalCost(this.count())},c.prototype._totalCost=function(a){var b,c,d,e,f,g;for(c={},g=this._cost,e=0,f=g.length;f>e;e++)b=g[e],d=c[b.unit.name]=_.clone(b),d.val=b.val*Math.pow(b.factor,a);return c},c.prototype.isCostMet=function(){var b,c,d,e;c=Number.MAX_VALUE,e=this.totalCost();for(d in e)b=e[d],b.val>0&&(c=Math.min(c,b.unit.count()/b.val));return c=Math.floor(c),a.assert(c>=0,"invalid max",c),c>0},c.prototype.isBuyable=function(){return this.isCostMet()&&this.isVisible()},c.prototype.buy=function(){var b;if(!this.isCostMet())throw new Error("We require more resources");if(!this.isBuyable())throw new Error("Cannot buy that upgrade");return b=1,this.game.withSave(function(c){return function(){var d,e,f,g,h,i,j;i=c.totalCost();for(f in i)d=i[f],a.assert(d.unit.count()>=d.val,"tried to buy more than we can afford. upgrade.isCostMet is broken!",c.name,f,d),d.unit._subtractCount(d.val);for(c._addCount(b),j=c.effect,g=0,h=j.length;h>g;g++)e=j[g],e.onBuy();return b}}(this))},c.prototype.stats=function(a,b){var c,d,e,f,g;for(c=this.count(),g=this.effect,e=0,f=g.length;f>e;e++)d=g[e],d.calcStats(a,b,c);return a},c}()}]),angular.module("swarmApp").factory("Unit",["util",function(a){var b;return b=function(){function b(a,b){this.game=a,this.unittype=b,this.name=this.unittype.name,this._stats=_.memoize(this._stats),this._count=_.memoize(this._count)}return b.prototype._initProducerPath=function(){var b,c,d,e,f;for(this._producerPathList=_.map(this.unittype.producerPathList,function(b){return function(c){return _.map(c,function(c){var d;return d=b.game.unit(c),a.assert(d),d})}}(this)),this.cost=_.map(this.unittype.cost,function(a){return function(b){var c;return c=_.clone(b),c.unit=a.game.unit(b.unittype),c}}(this)),this.prod=_.map(this.unittype.prod,function(a){return function(b){var c;return c=_.clone(b),c.unit=a.game.unit(b.unittype),c}}(this)),this.upgrades={list:function(){var a,c,d,e;for(d=this.game.upgradelist(),e=[],a=0,c=d.length;c>a;a++)b=d[a],this.unittype===b.type.unittype&&e.push(b);return e}.call(this),byName:{}},this.showparent=this.game.unit(this.unittype.showparent),e=this.upgrades.list,f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(this.upgrades.byName[b.name]=b);return f},b.prototype._producerPathData=function(){return _.map(this._producerPathList,function(b){return function(c){var d;return d=c.concat([b]),_.map(c,function(b,c){var e,f,g;return e=d[c+1],g=function(){var a,c,d,g;for(d=b.prod,g=[],a=0,c=d.length;c>a;a++)f=d[a],f.unit.name===e.name&&g.push(f);return g}(),a.assert(1===g.length),g=g[0],{parent:b,child:e,prod:f}})}}(this))},b.prototype.rawCount=function(){var a;return null!=(a=this.game.session.unittypes[this.name])?a:0},b.prototype._setCount=function(b){return this.game.session.unittypes[this.name]=b,a.clearMemoCache(this._count)},b.prototype._addCount=function(a){return this._setCount(this.rawCount()+a)},b.prototype._subtractCount=function(a){return this._addCount(-a)},b.prototype._gainsPath=function(a,b){var c,d,e,f,g,h,i,j,k;for(h=a[0],g=a.length,e=math.factorial(g),f=h.parent.rawCount(),d=1,j=0,k=a.length;k>j;j++)c=a[j],i=c.prod.val+c.parent.stat("base",0),d*=i*c.parent.stat("prod",1);return f*d/e*math.pow(b,g)},b.prototype.count=function(){return this._count(this.game.now.getTime())},b.prototype._count=function(){var b,c,d,e,f,g;for(a.clearMemoCache(this._count),d=this.game.diffSeconds(),b=this.rawCount(),g=this._producerPathData(),e=0,f=g.length;f>e;e++)c=g[e],b+=this._gainsPath(c,d);return b},b.prototype._costMetPercent=function(){var b,c,d,e,f;for(c=Number.MAX_VALUE,f=this.cost,d=0,e=f.length;e>d;d++)b=f[d],b.val>0&&(c=Math.min(c,b.unit.count()/b.val));return a.assert(c>=0,"invalid max",c),c},b.prototype.isVisible=function(){return this.unittype.disabled?!1:this._visible?!0:this._visible=this._isVisible()},b.prototype._isVisible=function(){var a,b,c,d,e,f,g,h,i;if(this.count()>0)return!0;if(this.cost.length>0){if(this._costMetPercent()>.3)return!0;for(h=this.prod,d=0,f=h.length;f>d;d++)if(b=h[d],b.unit.unittype.tier&&b.unit.count()>=5)return!0;return!1}for(i=this._producerPathList,e=0,g=i.length;g>e;e++)if(a=i[e],c=a[0],c.isVisible())return!0;return!1},b.prototype.maxCostMet=function(){return Math.floor(this._costMetPercent())},b.prototype.isCostMet=function(){return this.maxCostMet()>0},b.prototype.isBuyable=function(){return this.isCostMet()&&this.isVisible()&&!this.unittype.unbuyable},b.prototype.buyMax=function(){return this.buy(this.maxCostMet())},b.prototype.buy=function(a){if(null==a&&(a=1),!this.isCostMet())throw new Error("We require more resources");if(!this.isBuyable())throw new Error("Cannot buy that unit");return a=Math.min(a,this.maxCostMet()),this.game.withSave(function(b){return function(){var c,d,e,f,g;for(g=b.cost,e=0,f=g.length;f>e;e++)c=g[e],c.unit._subtractCount(c.val*a);return d=a*b.stat("twin",1),b._addCount(d),{num:a,twinnum:d}}}(this))},b.prototype.totalProduction=function(){var a,b,c,d,e;c={},a=this.count(),e=this.eachProduction();for(b in e)d=e[b],c[b]=d*a;return c},b.prototype.eachProduction=function(){var a,b,c,d,e;for(b={},e=this.prod,c=0,d=e.length;d>c;c++)a=e[c],b[a.unit.unittype.name]=(a.val+this.stat("base",0))*this.stat("prod",1);return b},b.prototype.hasStat=function(a,b){return null==b&&(b=void 0),null!=this.stats()[a]&&this.stats()[a]!==b},b.prototype.stat=function(b,c){var d,e;return null==c&&(c=void 0),a.assert(null!=b),d=null!=(e=this.stats()[b])?e:c,a.assert(null!=d,"no such stat",this.name,b),d},b.prototype.stats=function(){return this._stats()},b.prototype._stats=function(){var a,b,c,d,e,f;for(b={},a={},f=this.upgrades.list,d=0,e=f.length;e>d;d++)c=f[d],c.stats(b,a);return b},b}()}]),angular.module("swarmApp").factory("Game",["unittypes","upgradetypes","util","Upgrade","Unit",function(a,b,c,d,e){var f;return f=function(){function f(a){this.session=a,this._init()}return f.prototype._init=function(){var c,f,g,h,i,j,k,l,m,n,o;for(this._units={list:_.map(a.list,function(a){return function(b){return new e(a,b)}}(this)),byName:{}},l=this._units.list,h=0,j=l.length;j>h;h++)f=l[h],this._units.byName[f.name]=f;for(this._upgrades={list:_.map(b.list,function(a){return function(b){return new d(a,b)}}(this)),byName:{}},m=this._upgrades.list,i=0,k=m.length;k>i;i++)g=m[i],this._upgrades.byName[g.name]=g;n=this._units.list;for(c in n)f=n[c],f._initProducerPath();o=this._upgrades.list;for(c in o)g=o[c],g._init();return this.tick()},f.prototype.diffMillis=function(){return this.now.getTime()-this.session.date.reified.getTime()},f.prototype.diffSeconds=function(){return this.diffMillis()/1e3},f.prototype.tick=function(a){return null==a&&(a=new Date),this.now=a},f.prototype.elapsedStartMillis=function(){return this.now.getTime()-this.session.date.started.getTime()},f.prototype.unit=function(a){return _.isUndefined(a)?void 0:(_.isString(a)||(a=a.name),this._units.byName[a])},f.prototype.units=function(){return _.clone(this._units.byName)},f.prototype.unitlist=function(){return _.clone(this._units.list)},f.prototype.count=function(a,b){return this.unit(a).count(b)},f.prototype.counts=function(){return this.countUnits()},f.prototype.countUnits=function(){return _.mapValues(this.units(),function(){return function(a){return a.count()}}(this))},f.prototype.countUpgrades=function(){return _.mapValues(this.upgrades(),function(){return function(a){return a.count()}}(this))},f.prototype.upgrade=function(a){return _.isString(a)||(a=a.name),this._upgrades.byName[a]},f.prototype.upgrades=function(){return _.clone(this._upgrades.byName)},f.prototype.upgradelist=function(){return _.clone(this._upgrades.list)},f.prototype.reify=function(){var a,b;return b=this.diffSeconds(),a=this.counts(b),_.extend(this.session.unittypes,a),this.session.date.reified=this.now,c.assert(0===this.diffSeconds())},f.prototype.save=function(){return this.withSave(function(){})},f.prototype.importSave=function(a){return this.session.importSave(a),this._init(),this.session.save()},f.prototype.withSave=function(a){var b;return this.reify(),b=a(),this.session.save(),b},f.prototype.reset=function(){var a,b,c,d;for(this.session.reset(),this._init(),d=this.unitlist(),b=0,c=d.length;c>b;b++)a=d[b],a._setCount(a.unittype.init);return this.save()},f}()}]),angular.module("swarmApp").factory("game",["Game","session","env",function(a,b,c){var d;d=new a(b);try{b.load(),console.log("Game data loaded successfully.",this)}catch(e){"test"!==c&&console.warn("Failed to load saved data! Resetting."),d.reset()}return d}])}.call(this),function(){"use strict";angular.module("swarmApp").factory("Options",function(){var a;return a=function(){function a(a){this.session=a}return a.prototype.maybeSet=function(a,b){return null!=b?(console.log("set fps",a,b),this.set(a,b)):void 0},a.prototype.set=function(a,b){return this.session.options[a]=b,this.session.save()},a.prototype.get=function(a,b){var c;return null!=(c=this.session.options[a])?c:b},a.prototype.reset=function(a){return delete this.session.options[a]},a.prototype.fps=function(a){return this.maybeSet("fps",a),Math.min(60,Math.max(1,this.get("fps",10)))},a.prototype.fpsSleepMillis=function(){return 1e3/this.fps()},a}()}),angular.module("swarmApp").factory("options",["Options","session",function(a,b){return new a(b)}])}.call(this),function(){"use strict";angular.module("swarmApp").controller("OptionsCtrl",["$scope","$location","options","session","game",function(a,b,c,d,e){return a.options=c,a.game=e,a.session=d,a.imported={},a.dateStarted=function(){return a.game.session.date.started},a.dateStartedAgo=function(){return moment(a.dateStarted()).fromNow()},a.select=function(a){return a.target.select()},a.importSave=function(b){a.imported={};try{return a.game.importSave(b),a.imported.success=!0,console.log("import success")}catch(c){return a.imported.error=!0,console.log("import error")}},a.confirmReset=function(){return confirm("You will lose everything and restart the game. No reset-bonuses here. You sure?")?(a.game.reset(),b.url("/")):void 0}}])}.call(this),function(){"use strict";angular.module("swarmApp").factory("UpgradeType",function(){var a;return a=function(){function a(a){_.extend(this,a)}return a}()}),angular.module("swarmApp").factory("UpgradeTypes",["spreadsheetUtil","UpgradeType","util",function(a,b,c){var d;return d=function(){function d(a,b){var c,d,e;for(this.unittypes=a,null==b&&(b=[]),this.list=[],this.byName={},d=0,e=b.length;e>d;d++)c=b[d],this.register(c)}return d.prototype.register=function(a){return c.assert(a.name,"upgrade without a name",a),this.list.push(a),this.byName[a.name]=a},d.parseSpreadsheet=function(c,e,f){var g,h,i,j,k,l,m;for(i=a.parseRows({name:["requires","cost","effect"]},f.data.upgrades.elements),g=new d(c,function(){var a,c,d;for(d=[],a=0,c=i.length;c>a;a++)h=i[a],h.name&&d.push(new b(h));return d}()),m=g.list,k=0,l=m.length;l>k;k++)j=m[k],a.resolveList([j],"unittype",c.byName),a.resolveList(j.cost,"unittype",c.byName),a.resolveList(j.requires,"unittype",c.byName),a.resolveList(j.effect,"unittype",c.byName),a.resolveList(j.effect,"type",e.byName);return g},d}()}]),angular.module("swarmApp").factory("upgradetypes",["UpgradeTypes","unittypes","effecttypes","spreadsheet",function(a,b,c,d){return a.parseSpreadsheet(b,c,d)}])}.call(this),function(){"use strict";var a,b=[].slice;angular.module("swarmApp").service("util",a=function(){function a(){}return a.prototype.sum=function(a){return _.reduce(a,function(a,b){return a+b},0)},a.prototype.assert=function(){var a,c;if(c=arguments[0],a=2<=arguments.length?b.call(arguments,1):[],!c)throw console.error.apply(console,["Assertion error"].concat(b.call(a))),new Error(a);return c},a.prototype.walk=function(a,b,c,d){var e,f,g,h,i,j,k;if(null==c&&(c=""),null==d&&(d=[]),i=b(a,c),null!=i&&d.push(i),_.isArray(a))for(f=j=0,k=a.length;k>j;f=++j)e=a[f],this.walk(e,b,""+c+"["+f+"]",d);else if(_.isObject(a))for(g in a)h=a[g],this.walk(h,b,""+c+"."+g,d);return d},a.prototype.clearMemoCache=function(){var a,c,d,e,f,g,h;for(d=1<=arguments.length?b.call(arguments,0):[],h=[],f=0,g=d.length;g>f;f++)a=d[f],h.push(function(){var b,d;b=a.cache,d=[];for(c in b)e=b[c],d.push(delete a.cache[c]);return d}());return h},a}())}.call(this),function(){"use strict";angular.module("swarmApp").factory("EffectType",function(){var a;return a=function(){function a(a){_.extend(this,a)}return a}()}),angular.module("swarmApp").factory("EffectTypes",function(){var a;return a=function(){function a(a){var b,c,d;for(null==a&&(a=[]),this.list=[],this.byName={},c=0,d=a.length;d>c;c++)b=a[c],this.register(b)}return a.prototype.register=function(a){return this.list.push(a),this.byName[a.name]=a,this},a}()}),angular.module("swarmApp").factory("effecttypes",["EffectType","EffectTypes","util",function(a,b,c){var d,e,f,g;return d=new b,e=function(a){return c.assert(null!=a.unit),c.assert(null!=a.val)},f=function(a){return c.assert(null!=a.unit),c.assert(null!=a.stat),c.assert(null!=a.val)},g=function(a,b,d){return null==b[a]&&(b[a]=d),c.assert(b[a]===d,"conflicting stat operations. expected "+d+", got "+b[a],a,b,d)},d.register(new a({name:"addUnit",validate:e,onBuy:function(a){return a.unit._addCount(a.val)}})),d.register(new a({name:"compoundUnit",validate:e,onBuy:function(a){return a.unit._setCount(a.unit.count()*a.val)}})),d.register(new a({name:"multStat",validate:f,calcStats:function(a,b,c,d){var e;return g(a.stat,c,"mult"),null==b[e=a.stat]&&(b[e]=1),b[a.stat]*=Math.pow(a.val,d)}})),d.register(new a({name:"addStat",validate:f,calcStats:function(a,b,c,d){var e;return g(a.stat,c,"add"),null==b[e=a.stat]&&(b[e]=0),b[a.stat]+=a.val*d}})),d}])}.call(this),function(){"use strict";angular.module("swarmApp").factory("analytics",["$rootScope","$analytics","env","game",function(a,b,c){return"test"!==c?(a.$on("save",function(){return console.log("save event")}),a.$on("command",function(a,b){return console.log("command event",a.name,b.name,b)})):void 0}])}.call(this),function(){"use strict";angular.module("swarmApp").controller("ChangelogCtrl",["$scope",function(){}])}.call(this),function(){"use strict";angular.module("swarmApp").factory("commands",["util","$rootScope",function(a,b){var c;return new(c=function(){function c(){}return c.prototype._emit=function(c,d){return a.assert(null==d.name,"command has a name already?"),d.name=c,b.$emit("command",d)},c.prototype.buyUnit=function(a,b){var c;return c=a.buy(b),this._emit("buyUnit",{unit:a,unitname:a.name,now:a.game.now,elapsed:a.game.elapsedStartMillis(),attempt:b,num:c.num,twinnum:c.twinnum})},c.prototype.buyMaxUnit=function(a){var b;return b=a.buyMax(),this._emit("buyMaxUnit",{unit:a,unitname:a.name,now:a.game.now,elapsed:a.game.elapsedStartMillis(),num:b.num,twinnum:b.twinnum})},c.prototype.buyUpgrade=function(a){var b;return b=a.buy(),this._emit("buyUpgrade",{upgrade:a,upgradename:a.name,now:a.game.now,elapsed:a.game.elapsedStartMillis(),num:b})},c}())}])}.call(this),function(){"use strict";angular.module("swarmApp").factory("ReplayLog",["util","$rootScope","env",function(a,b,c){var d;return d=function(){function a(a,b){this.id=a,this.log=null!=b?b:[],this._init()}return a.prototype._init=function(){return this.tryLoad()},a.prototype.push=function(a){return this.log.push(a),this._cachedSave=this.save(),console.log("saving replay",this._cachedSave.length),b.$emit("replay:save",this)},a.prototype.reset=function(){return this.log.length=0,this.save()},a.prototype.compressToUTF16=function(){return LZString.compressToUTF16(JSON.stringify(this.log))},a.prototype.compressToBase64=function(){return LZString.compressToBase64(JSON.stringify(this.log))},a.prototype.save=function(){var a;return a=JSON.stringify(this.log),a=LZString.compressToUTF16(a),localStorage.setItem("replay:"+this.id,a),a},a.prototype.load=function(){var a;return a=localStorage.getItem("replay:"+this.id),a=LZString.decompressFromUTF16(a),this.log=JSON.parse(a)},a.prototype.tryLoad=function(){var a;try{return this.load()}catch(b){if(a=b,"test"!==c)return console.warn("couldn't load replay log, ignoring.",a)}},a}()}]),angular.module("swarmApp").factory("StatisticsListener",["util","ReplayLog",function(a,b){var c;return c=function(){function a(a){this.session=a,this.replay=new b(a.id),this._init()}return a.prototype._init=function(){var a,b;return a=null!=(b=this.session).statistics?b.statistics:b.statistics={},null==a.byUnit&&(a.byUnit={}),null==a.byUpgrade&&(a.byUpgrade={}),null==a.clicks&&(a.clicks=0),this.replay.tryLoad()},a.prototype.push=function(a){var b,c,d,e,f,g;return b=this.session.statistics,b.clicks+=1,null!=a.unitname&&(c=null!=(d=b.byUnit)[f=a.unitname]?d[f]:d[f]={clicks:0,num:0,twinnum:0,elapsedFirst:a.elapsed},c.clicks+=1,c.num+=a.num,c.twinnum+=a.twinnum),null!=a.upgradename&&(c=null!=(e=b.byUpgrade)[g=a.upgradename]?e[g]:e[g]={clicks:0,num:0,elapsedFirst:a.elapsed},c.clicks+=1,c.num+=a.num),this.session.save(),delete a.now,delete a.unit,delete a.upgrade,this.replay.push(a)},a.prototype.listen=function(a){return a.$on("reset",function(a){return function(){return a._init(),a.replay.reset()}}(this)),a.$on("command",function(a){return function(b,c){return console.log("statistics",b,c),a.push(c)}}(this))},a}()}]),angular.module("swarmApp").factory("statistics",["session","StatisticsListener","$rootScope",function(a,b,c){var d;return d=new b(a),d.listen(c),d}])}.call(this),function(){"use strict";angular.module("swarmApp").controller("StatisticsCtrl",["$scope","session","statistics","game",function(a,b,c,d){var e;return a.listener=c,a.session=b,a.stats=b.statistics,a.game=d,e=function(a){var b;return b=moment.utc(a),""+(parseInt(b.format("DDD"))-1)+"d "+b.format("H\\h mm:ss.SSS")},a.unitStats=function(b){var c,d;return c=_.clone(null!=(d=a.stats.byUnit)?d[null!=b?b.name:void 0]:void 0),null!=c&&(c.elapsedFirstStr=e(c.elapsedFirst)),c},a.hasUnitStats=function(b){return!!a.unitStats(b)},a.upgradeStats=function(b){var c;return c=a.stats.byUpgrade[b.name],null!=c&&(c.elapsedFirstStr=e(c.elapsedFirst)),c},a.hasUpgradeStats=function(b){return!!a.upgradeStats(b)}}])}.call(this);