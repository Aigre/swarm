(function(){"use strict";angular.module("swarmApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","swarmEnv","swarmSpreadsheetPreload","angulartics","angulartics.google.analytics"]),angular.module("swarmApp").config(["$routeProvider",function(a){return a.when("/debug",{templateUrl:"views/debug.html",controller:"DebugCtrl"}).when("/",{templateUrl:"views/unitlist.html",controller:"UnitlistCtrl"}).when("/unit",{templateUrl:"views/unitlist.html",controller:"UnitlistCtrl"}).when("/unit/:unit",{templateUrl:"views/unitlist.html",controller:"UnitlistCtrl"}).when("/options",{templateUrl:"views/options.html",controller:"OptionsCtrl"}).when("/changelog",{templateUrl:"views/changelog.html",controller:"ChangelogCtrl"}).when("/statistics",{templateUrl:"views/statistics.html",controller:"StatisticsCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("swarmApp").config(["env","$logProvider",function(a,b){return b.debugEnabled("prod"!==a)}]),angular.module("swarmApp").config(["gaTrackingID","version",function(a){return a&&null!=window.ga?window.ga("create",a,"auto"):void 0}]),angular.module("swarmApp").run(["env","$location","$log",function(a,b,c){var d,e,f,g;return e={0:!1,"":!1,"false":!1},d=null!=(f=b.search().allowinsecure)?f:"prod"!==a,d=null!=(g=e[d])?g:!0,c.debug("protocol check",d,b.protocol()),"http"!==b.protocol()||d?void 0:(window.location.protocol="https",c.debug("window.location.protocol = 'https:'"))}])}).call(this),angular.module("swarmEnv",[]).constant("version","0.1.15").constant("env","prod").constant("gaTrackingID","UA-53523462-1"),angular.module("swarmSpreadsheetPreload",[]).value("spreadsheetPreload",{achievements:{column_names:["name","label","description","longdesc","requireunit","require"],elements:[{description:"Build a drone",label:"Worker Bee",longdesc:"A swarm is not built by only one hand.",name:"drone1",require:1,requireunit:"drone",rowNumber:1},{description:"Build 201 drones",label:"Supply Limit Exceeded",longdesc:"",name:"drone2",require:201,requireunit:"drone",rowNumber:2},{description:"Build a queen",label:"",longdesc:"",name:"queen1",require:1,requireunit:"queen",rowNumber:3}],name:"achievements"},unittypes:{column_names:["name","label","plural","verb","verbone","column","init","description","lol","disabled","unbuyable","tier","cost.unittype","cost.val","prod.unittype","prod.val","showparent","warnfirst.unittype","warnfirst.val","warnfirst.text","requires.unittype","requires.upgradetype","requires.val"],elements:[{column:0,"cost.unittype":"","cost.val":"",description:"Main source of larvae. Everyone starts with one, and no one can buy more. No one knows they have it, because it's invisible.",disabled:"TRUE",init:1,label:"invisible hatchery",lol:"Stop digging around in the source code, you dirty cheater.",name:"invisiblehatchery",plural:"invisible hatcherytachi","prod.unittype":"larva","prod.val":1,"requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:1,showparent:"",tier:"",unbuyable:"TRUE",verb:"",verbone:"","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:0,"cost.unittype":"","cost.val":"",description:"Meat is delicious. All of your swarm's creatures eat meat.",disabled:"",init:35,label:"meat",lol:"Some kingdoms use meat to craft paste or cars. Meat, meat, it can't be beat~",name:"meat",plural:"meat","prod.unittype":"","prod.val":"","requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:2,showparent:"",tier:0,unbuyable:"TRUE",verb:"gather",verbone:"gathers","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:0,"cost.unittype":"cocoon","cost.val":1,description:"The children of your swarm. These young creatures morph into other adult units.",disabled:"",init:10,label:"larva",lol:'Why not "larvas", English?',name:"larva",plural:"larvae","prod.unittype":"","prod.val":"","requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:3,showparent:"invisiblehatchery",tier:"",unbuyable:"",verb:"birth",verbone:"births","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:0,"cost.unittype":"larva","cost.val":1,description:"Each cocoon is a larva encased within a protective shell. They can freely enter and leave their cocoon, but cannot be transformed into other units while cocooned.",disabled:"",init:"",label:"cocoon",lol:"Enemy COCOON used HARDEN!",name:"cocoon",plural:"cocoons","prod.unittype":"","prod.val":"","requires.unittype":"","requires.upgradetype":"cocooning","requires.val":1,rowNumber:4,showparent:"",tier:"",unbuyable:"",verb:"create",verbone:"create","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:0,"cost.unittype":"","cost.val":"",description:"Your swarm's military captures territory, fueling your expansion.",disabled:"",init:"",label:"territory",lol:"Your terrifying warriors tear through their foes to capture territory.",name:"territory",plural:"territory","prod.unittype":"","prod.val":"","requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:5,showparent:"",tier:"",unbuyable:"TRUE",verb:"capture",verbone:"captures","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:0,"cost.unittype":"","cost.val":"",description:"Allows mutation, increasing the power of each member of your swarm.",disabled:"",init:"",label:"mutagen",lol:"Also creates heroic turtles.",name:"mutagen",plural:"mutagens","prod.unittype":"","prod.val":"","requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:6,showparent:"",tier:"",unbuyable:"TRUE",verb:"",verbone:"","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:1,"cost.unittype":"meat","cost.val":10,description:"Drones are the lowest class of worker in your swarm. They continuously gather meat to feed your swarm.",disabled:"",init:"",label:"drone",lol:"Not to be confused with probes or mules.",name:"drone",plural:"drones","prod.unittype":"meat","prod.val":1,"requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:7,showparent:"",tier:1,unbuyable:"",verb:"hatch",verbone:"hatches","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:"","cost.unittype":"larva","cost.val":1,description:"",disabled:"",init:"",label:"",lol:"",name:"drone",plural:"","prod.unittype":"","prod.val":"","requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:8,showparent:"",tier:"",unbuyable:"",verb:"",verbone:"","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:1,"cost.unittype":"meat","cost.val":810,description:"Queens rule over your swarm's workers.",disabled:"",init:"",label:"queen",lol:"Why do bugs always have queens, but never kings? #mensrights",name:"queen",plural:"queens","prod.unittype":"drone","prod.val":2,"requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:9,showparent:"",tier:2,unbuyable:"",verb:"hatch",verbone:"hatches","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:"","cost.unittype":"drone","cost.val":100,description:"",disabled:"",init:"",label:"",lol:"",name:"queen",plural:"","prod.unittype":"","prod.val":"","requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:10,showparent:"",tier:"",unbuyable:"",verb:"",verbone:"","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:"","cost.unittype":"larva","cost.val":1,description:"",disabled:"",init:"",label:"",lol:"",name:"queen",plural:"","prod.unittype":"","prod.val":"","requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:11,showparent:"",tier:"",unbuyable:"",verb:"",verbone:"","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:1,"cost.unittype":"meat","cost.val":72900,description:"Nests provide space and support for your swarm's queens.",disabled:"",init:"",label:"nest",lol:"They also have fancy temperature controls.",name:"nest",plural:"nests","prod.unittype":"queen","prod.val":3,"requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:12,showparent:"",tier:3,unbuyable:"",verb:"build",verbone:"builds","warnfirst.text":"Your first nest will take a long time to regenerate the queens sacrificed to build it. Consider hatching more queens first.","warnfirst.unittype":"queen","warnfirst.val":2e3},{column:"","cost.unittype":"queen","cost.val":1e3,description:"",disabled:"",init:"",label:"",lol:"",name:"nest",plural:"","prod.unittype":"","prod.val":"","requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:13,showparent:"",tier:"",unbuyable:"",verb:"",verbone:"","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:"","cost.unittype":"territory","cost.val":10,description:"",disabled:"",init:"",label:"",lol:"",name:"nest",plural:"","prod.unittype":"","prod.val":"","requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:14,showparent:"",tier:"",unbuyable:"",verb:"",verbone:"","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:"","cost.unittype":"larva","cost.val":1,description:"",disabled:"",init:"",label:"",lol:"",name:"nest",plural:"","prod.unittype":"","prod.val":"","requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:15,showparent:"",tier:"",unbuyable:"",verb:"",verbone:"","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:1,"cost.unittype":"meat","cost.val":6561e3,description:"Greater queens rule over the lesser queens of very large swarms.",disabled:"",init:"",label:"greater queen",lol:'Can\'t think of a name? Pick another creature and slap "greater" in front of it!',name:"greaterqueen",plural:"greater queens","prod.unittype":"nest","prod.val":4,"requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:16,showparent:"",tier:4,unbuyable:"",verb:"hatch",verbone:"hatches","warnfirst.text":"Your first few greater queens will take a long time to regenerate the nests sacrificed to build them. Consider building more nests first.","warnfirst.unittype":"nest","warnfirst.val":4e4},{column:"","cost.unittype":"nest","cost.val":1e4,description:"",disabled:"",init:"",label:"",lol:"",name:"greaterqueen",plural:"","prod.unittype":"","prod.val":"","requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:17,showparent:"",tier:"",unbuyable:"",verb:"",verbone:"","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:"","cost.unittype":"territory","cost.val":50,description:"",disabled:"",init:"",label:"",lol:"",name:"greaterqueen",plural:"","prod.unittype":"","prod.val":"","requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:18,showparent:"",tier:"",unbuyable:"",verb:"",verbone:"","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:"","cost.unittype":"larva","cost.val":1,description:"",disabled:"",init:"",label:"",lol:"",name:"greaterqueen",plural:"","prod.unittype":"","prod.val":"","requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:19,showparent:"",tier:"",unbuyable:"",verb:"",verbone:"","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:1,"cost.unittype":"meat","cost.val":59049e4,description:"Hives are huge structures crafted from meat and the bodies of thousands of queens. They allow your swarm to grow even faster.",disabled:"",init:"",label:"hive",lol:"Serve the hive. Feel the groove. I control the way you move.",name:"hive",plural:"hives","prod.unittype":"greaterqueen","prod.val":5,"requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:20,showparent:"",tier:5,unbuyable:"",verb:"build",verbone:"builds","warnfirst.text":"Your first few hives will take a long time to regenerate the greater queens sacrificed to build them. Consider hatching more greater queens first.","warnfirst.unittype":"greaterqueen","warnfirst.val":8e5},{column:"","cost.unittype":"greaterqueen","cost.val":1e5,description:"",disabled:"",init:"",label:"",lol:"",name:"hive",plural:"","prod.unittype":"","prod.val":"","requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:21,showparent:"",tier:"",unbuyable:"",verb:"",verbone:"","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:"","cost.unittype":"territory","cost.val":250,description:"",disabled:"",init:"",label:"",lol:"",name:"hive",plural:"","prod.unittype":"","prod.val":"","requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:22,showparent:"",tier:"",unbuyable:"",verb:"",verbone:"","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:"","cost.unittype":"larva","cost.val":1,description:"",disabled:"",init:"",label:"",lol:"",name:"hive",plural:"","prod.unittype":"","prod.val":"","requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:23,showparent:"",tier:"",unbuyable:"",verb:"",verbone:"","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:1,"cost.unittype":"meat","cost.val":531441e5,description:"Hive queens oversee the production of hives in the largest swarms.",disabled:"",init:"",label:"hive queen",lol:"Managers managing managers managing managers.",name:"hivequeen",plural:"hive queens","prod.unittype":"hive","prod.val":6,"requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:24,showparent:"",tier:6,unbuyable:"",verb:"hatch",verbone:"hatches","warnfirst.text":"Your first few hive queens will take a long time to regenerate the hives sacrificed to build them. Consider building more hives first.","warnfirst.unittype":"hive","warnfirst.val":4e6},{column:"","cost.unittype":"hive","cost.val":1e6,description:"",disabled:"",init:"",label:"",lol:"",name:"hivequeen",plural:"","prod.unittype":"","prod.val":"","requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:25,showparent:"",tier:"",unbuyable:"",verb:"",verbone:"","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:"","cost.unittype":"territory","cost.val":1250,description:"",disabled:"",init:"",label:"",lol:"",name:"hivequeen",plural:"","prod.unittype":"","prod.val":"","requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:26,showparent:"",tier:"",unbuyable:"",verb:"",verbone:"","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:"","cost.unittype":"larva","cost.val":1,description:"",disabled:"",init:"",label:"",lol:"",name:"hivequeen",plural:"","prod.unittype":"","prod.val":"","requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:27,showparent:"",tier:"",unbuyable:"",verb:"",verbone:"","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:1,"cost.unittype":"meat","cost.val":4782969e6,description:"The mightiest mortal ruler of any swarm.",disabled:"",init:"",label:"hive empress",lol:"On her thorax and on her forewing she has this name written: queen of queens and lady of ladies.",name:"empress",plural:"hive empresses","prod.unittype":"hivequeen","prod.val":7,"requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:28,showparent:"",tier:7,unbuyable:"",verb:"grow",verbone:"grows","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:"","cost.unittype":"hivequeen","cost.val":1e7,description:"",disabled:"",init:"",label:"",lol:"",name:"empress",plural:"","prod.unittype":"","prod.val":"","requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:29,showparent:"",tier:"",unbuyable:"",verb:"",verbone:"","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:"","cost.unittype":"territory","cost.val":6250,description:"",disabled:"",init:"",label:"",lol:"",name:"empress",plural:"","prod.unittype":"","prod.val":"","requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:30,showparent:"",tier:"",unbuyable:"",verb:"",verbone:"","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:"","cost.unittype":"larva","cost.val":1,description:"",disabled:"",init:"",label:"",lol:"",name:"empress",plural:"","prod.unittype":"","prod.val":"","requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:31,showparent:"",tier:"",unbuyable:"",verb:"",verbone:"","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:1,"cost.unittype":"meat","cost.val":43046721e7,description:"Your swarm begins to look to the heavens for guidance. Prophets foreshadow divine support for your brood.",disabled:"",init:"",label:"hive prophet",lol:"",name:"prophet",plural:"hive prophets","prod.unittype":"empress","prod.val":8,"requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:32,showparent:"",tier:8,unbuyable:"",verb:"grow",verbone:"grows","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:"","cost.unittype":"empress","cost.val":1e8,description:"",disabled:"",init:"",label:"",lol:"",name:"prophet",plural:"","prod.unittype":"","prod.val":"","requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:33,showparent:"",tier:"",unbuyable:"",verb:"",verbone:"","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:"","cost.unittype":"territory","cost.val":31250,description:"",disabled:"",init:"",label:"",lol:"",name:"prophet",plural:"","prod.unittype":"","prod.val":"","requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:34,showparent:"",tier:"",unbuyable:"",verb:"",verbone:"","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:"","cost.unittype":"larva","cost.val":1,description:"",disabled:"",init:"",label:"",lol:"",name:"prophet",plural:"","prod.unittype":"","prod.val":"","requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:35,showparent:"",tier:"",unbuyable:"",verb:"",verbone:"","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:1,"cost.unittype":"meat","cost.val":38742e12,description:"The prophecies are true! Pleased by your sacrifices, the goddesses have manifest themselves in mortal form to rule over your swarm.",disabled:"",init:"",label:"goddess of the hive",lol:"",name:"goddess",plural:"goddesses of the hive","prod.unittype":"prophet","prod.val":9,"requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:36,showparent:"",tier:9,unbuyable:"",verb:"summon",verbone:"summons","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:"","cost.unittype":"prophet","cost.val":1e9,description:"",disabled:"",init:"",label:"",lol:"",name:"goddess",plural:"","prod.unittype":"","prod.val":"","requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:37,showparent:"",tier:"",unbuyable:"",verb:"",verbone:"","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:"","cost.unittype":"territory","cost.val":156250,description:"",disabled:"",init:"",label:"",lol:"",name:"goddess",plural:"","prod.unittype":"","prod.val":"","requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:38,showparent:"",tier:"",unbuyable:"",verb:"",verbone:"","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:"","cost.unittype":"larva","cost.val":1,description:"",disabled:"",init:"",label:"",lol:"",name:"goddess",plural:"","prod.unittype":"","prod.val":"","requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:39,showparent:"",tier:"",unbuyable:"",verb:"",verbone:"","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:1,"cost.unittype":"meat","cost.val":348678e13,description:"Entire groups of divine beings have heard your pleas, and lend their support to your swarm.",disabled:"",init:"",label:"brood pantheon",lol:"riot pls",name:"pantheon",plural:"brood pantheons","prod.unittype":"goddess","prod.val":10,"requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:40,showparent:"",tier:10,unbuyable:"",verb:"summon",verbone:"summons","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:"","cost.unittype":"goddess","cost.val":1e10,description:"",disabled:"",init:"",label:"",lol:"",name:"pantheon",plural:"","prod.unittype":"","prod.val":"","requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:41,showparent:"",tier:"",unbuyable:"",verb:"",verbone:"","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:"","cost.unittype":"territory","cost.val":781250,description:"",disabled:"",init:"",label:"",lol:"",name:"pantheon",plural:"","prod.unittype":"","prod.val":"","requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:42,showparent:"",tier:"",unbuyable:"",verb:"",verbone:"","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:"","cost.unittype":"larva","cost.val":1,description:"",disabled:"",init:"",label:"",lol:"",name:"pantheon",plural:"","prod.unittype":"","prod.val":"","requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:43,showparent:"",tier:"",unbuyable:"",verb:"",verbone:"","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:1,"cost.unittype":"meat","cost.val":313811e15,description:"You win. Honestly, I didn't think anyone would ever see these units. You're either very dedicated or you broke the game, and I'm impressed either way.",disabled:"",init:"",label:"pantheon of pantheons",lol:"A pantheon of pantheons doesn't even make sense, but do you care? Power-up! Power-up!",name:"pantheon2",plural:"pantheons of pantheons","prod.unittype":"pantheon","prod.val":11,"requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:44,showparent:"",tier:11,unbuyable:"",verb:"summon",verbone:"summons","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:"","cost.unittype":"pantheon","cost.val":1e11,description:"",disabled:"",init:"",label:"",lol:"",name:"pantheon2",plural:"","prod.unittype":"","prod.val":"","requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:45,showparent:"",tier:"",unbuyable:"",verb:"",verbone:"","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:"","cost.unittype":"territory","cost.val":3906250,description:"",disabled:"",init:"",label:"",lol:"",name:"pantheon2",plural:"","prod.unittype":"","prod.val":"","requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:46,showparent:"",tier:"",unbuyable:"",verb:"",verbone:"","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:"","cost.unittype":"larva","cost.val":1,description:"",disabled:"",init:"",label:"",lol:"",name:"pantheon2",plural:"","prod.unittype":"","prod.val":"","requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:47,showparent:"",tier:"",unbuyable:"",verb:"",verbone:"","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:2,"cost.unittype":"meat","cost.val":500,description:"Your swarm's smallest and weakest warriors. They use their teeth and claws to attack foes, and can be vicious in large numbers",disabled:"",init:"",label:"swarmling",lol:"Groups of six at the wrong time are pretty vicious too.",name:"swarmling",plural:"swarmlings","prod.unittype":"territory","prod.val":.02,"requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:48,showparent:"",tier:1,unbuyable:"",verb:"hatch",verbone:"hatches","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:"","cost.unittype":"larva","cost.val":1,description:"",disabled:"",init:"",label:"",lol:"",name:"swarmling",plural:"","prod.unittype":"","prod.val":"","requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:49,showparent:"",tier:"",unbuyable:"",verb:"",verbone:"","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:2,"cost.unittype":"meat","cost.val":72e3,description:"Weak flying warriors. They roam in packs, attacking any threats with venomous stingers.",disabled:"",init:"",label:"stinger",lol:"Reasonably smart critters - they consistently earn a 3.0 GPA.",name:"stinger",plural:"stingers","prod.unittype":"territory","prod.val":.6,"requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:50,showparent:"",tier:2,unbuyable:"",verb:"hatch",verbone:"hatches","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:"","cost.unittype":"larva","cost.val":1,description:"",disabled:"",init:"",label:"",lol:"",name:"stinger",plural:"","prod.unittype":"","prod.val":"","requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:51,showparent:"",tier:"",unbuyable:"",verb:"",verbone:"","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:2,"cost.unittype":"meat","cost.val":10368e3,description:"Terrifying eight-legged beasts who leap upon their prey, ensnare it in sticky traps, and finally liquify it into a delicious beverage.",disabled:"",init:"",label:"arachnomorph",lol:"Four legs good. Eight legs better.",name:"spider",plural:"arachnomorphs","prod.unittype":"territory","prod.val":18,"requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:52,showparent:"",tier:3,unbuyable:"",verb:"hatch",verbone:"hatches","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:"","cost.unittype":"larva","cost.val":1,description:"",disabled:"",init:"",label:"",lol:"",name:"spider",plural:"","prod.unittype":"","prod.val":"","requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:53,showparent:"",tier:"",unbuyable:"",verb:"",verbone:"","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:2,"cost.unittype":"meat","cost.val":1492992e3,description:"These hated creatures feast on the blood of their victims, and spread disease to larger prey they cannot kill outright.",disabled:"",init:"",label:"culicimorph",lol:"These guys really suck.",name:"mosquito",plural:"culicimorphs","prod.unittype":"territory","prod.val":540,"requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:54,showparent:"",tier:4,unbuyable:"",verb:"hatch",verbone:"hatches","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:"","cost.unittype":"larva","cost.val":1,description:"",disabled:"",init:"",label:"",lol:"",name:"mosquito",plural:"","prod.unittype":"","prod.val":"","requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:55,showparent:"",tier:"",unbuyable:"",verb:"",verbone:"","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:2,"cost.unittype":"meat","cost.val":214990848e3,description:"Groups of hungry locusts devour any creature who makes the mistake of standing in their way.",disabled:"",init:"",label:"locust",lol:"Preceded by fiery hail, followed by darkness.",name:"locust",plural:"locusts","prod.unittype":"territory","prod.val":16200,"requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:56,showparent:"",tier:5,unbuyable:"",verb:"hatch",verbone:"hatches","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:"","cost.unittype":"larva","cost.val":1,description:"",disabled:"",init:"",label:"",lol:"",name:"locust",plural:"","prod.unittype":"","prod.val":"","requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:57,showparent:"",tier:"",unbuyable:"",verb:"",verbone:"","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:2,"cost.unittype":"meat","cost.val":30958682112e3,description:"The hard shell of the roach makes it a fearsome opponent; it is nearly impossible to kill.",disabled:"",init:"",label:"roach",lol:"ROOSTERS.",name:"roach",plural:"roaches","prod.unittype":"territory","prod.val":486e3,"requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:58,showparent:"",tier:6,unbuyable:"",verb:"hatch",verbone:"hatches","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:"","cost.unittype":"larva","cost.val":1,description:"",disabled:"",init:"",label:"",lol:"",name:"roach",plural:"","prod.unittype":"","prod.val":"","requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:59,showparent:"",tier:"",unbuyable:"",verb:"",verbone:"","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:2,"cost.unittype":"meat","cost.val":445805e10,description:"The larger, and more fearsome, cousin of the arachnomorph.",disabled:"",init:"",label:"giant arachnomorph",lol:"",name:"giantspider",plural:"giant arachnomorphs","prod.unittype":"territory","prod.val":1458e4,"requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:60,showparent:"",tier:7,unbuyable:"",verb:"hatch",verbone:"hatches","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:"","cost.unittype":"larva","cost.val":1,description:"",disabled:"",init:"",label:"",lol:"",name:"giantspider",plural:"","prod.unittype":"","prod.val":"","requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:61,showparent:"",tier:"",unbuyable:"",verb:"",verbone:"","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:2,"cost.unittype":"meat","cost.val":641959e12,description:"Swift wormlike creatures with hundreds of legs and an extremely venomous bite.",disabled:"",init:"",label:"chilopodomorph",lol:"Hi Mom!",name:"centipede",plural:"chilopodomorphs","prod.unittype":"territory","prod.val":4374e5,"requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:62,showparent:"",tier:8,unbuyable:"",verb:"hatch",verbone:"hatches","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:"","cost.unittype":"larva","cost.val":1,description:"",disabled:"",init:"",label:"",lol:"",name:"centipede",plural:"","prod.unittype":"","prod.val":"","requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:63,showparent:"",tier:"",unbuyable:"",verb:"",verbone:"","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:2,"cost.unittype":"meat","cost.val":924421e14,description:"",disabled:"",init:"",label:"wasp",lol:"",name:"wasp",plural:"wasps","prod.unittype":"territory","prod.val":13122e6,"requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:64,showparent:"",tier:9,unbuyable:"",verb:"hatch",verbone:"hatches","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:"","cost.unittype":"larva","cost.val":1,description:"",disabled:"",init:"",label:"",lol:"",name:"wasp",plural:"","prod.unittype":"","prod.val":"","requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:65,showparent:"",tier:"",unbuyable:"",verb:"",verbone:"","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:2,"cost.unittype":"meat","cost.val":1.33117e22,description:"Huge burrowing worms, devourers appear from beneath the earth to swallow their prey before it can react.",disabled:"",init:"",label:"devourer",lol:"Extra fun in hardcore leagues and fractured maps.",name:"devourer",plural:"devourers","prod.unittype":"territory","prod.val":39366e7,"requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:66,showparent:"",tier:10,unbuyable:"",verb:"hatch",verbone:"hatches","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:"","cost.unittype":"larva","cost.val":1,description:"",disabled:"",init:"",label:"",lol:"",name:"devourer",plural:"","prod.unittype":"","prod.val":"","requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:67,showparent:"",tier:"",unbuyable:"",verb:"",verbone:"","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:2,"cost.unittype":"meat","cost.val":1.91688e24,description:"",disabled:"",init:"",label:"goon",lol:"Likes spreadsheets and spaceships. Dislikes high taxes.",name:"goon",plural:"goons","prod.unittype":"territory","prod.val":118098e8,"requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:68,showparent:"",tier:11,unbuyable:"",verb:"hatch",verbone:"hatches","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""},{column:"","cost.unittype":"larva","cost.val":1,description:"",disabled:"",init:"",label:"",lol:"",name:"goon",plural:"","prod.unittype":"","prod.val":"","requires.unittype":"","requires.upgradetype":"","requires.val":"",rowNumber:69,showparent:"",tier:"",unbuyable:"",verb:"",verbone:"","warnfirst.text":"","warnfirst.unittype":"","warnfirst.val":""}],name:"unittypes"},upgrades:{column_names:["name","label","description","lol","maxlevel","unittype","requires.unittype","requires.val","cost.unittype","cost.val","cost.factor","effect.type","effect.unittype","effect.val","effect.stat","effect.unittype2"],elements:[{"cost.factor":100,"cost.unittype":"meat","cost.val":300,description:"Produce 1 more larvae per second.","effect.stat":"base","effect.type":"addStat","effect.unittype":"invisiblehatchery","effect.unittype2":"","effect.val":1,label:"hatchery",lol:"",maxlevel:"",name:"hatchery","requires.unittype":"","requires.val":"",rowNumber:1,unittype:"invisiblehatchery"},{"cost.factor":1.35,"cost.unittype":"territory","cost.val":100,description:"Larvae production increased by 10%.","effect.stat":"prod","effect.type":"multStat","effect.unittype":"invisiblehatchery","effect.unittype2":"","effect.val":1.1,label:"expansion",lol:"",maxlevel:"",name:"expansion","requires.unittype":"","requires.val":"",rowNumber:2,unittype:"invisiblehatchery"},{"cost.factor":111,"cost.unittype":"meat","cost.val":7e3,description:"Use meat to instantly create 1,000 larvae. Any existing larvae and cocoons are cloned.","effect.stat":"","effect.type":"compoundUnit","effect.unittype":"larva","effect.unittype2":"cocoon","effect.val":2,label:"inject larvae",lol:"",maxlevel:"",name:"injectlarvae","requires.unittype":"","requires.val":"",rowNumber:3,unittype:"invisiblehatchery"},{"cost.factor":"","cost.unittype":"","cost.val":"",description:"","effect.stat":"","effect.type":"addUnit","effect.unittype":"larva","effect.unittype2":"","effect.val":1e3,label:"",lol:"",maxlevel:"",name:"injectlarvae","requires.unittype":"","requires.val":"",rowNumber:4,unittype:""},{"cost.factor":"","cost.unittype":"meat","cost.val":1e9,description:"Allows your larvae to encase themselves within cocoons. Cocooned larvae cannot mutate into other units, and can still be cloned by Inject Larvae. You may cocoon and uncocoon your larvae whenever you wish.","effect.stat":"","effect.type":"","effect.unittype":"","effect.unittype2":"","effect.val":"",label:"cocooning",lol:"",maxlevel:1,name:"cocooning","requires.unittype":"meat","requires.val":1e6,rowNumber:5,unittype:"invisiblehatchery"},{"cost.factor":666,"cost.unittype":"drone","cost.val":66,description:"Drones gather more meat.","effect.stat":"prod","effect.type":"multStat","effect.unittype":"drone","effect.unittype2":"","effect.val":2,label:"faster drones",lol:"",maxlevel:"",name:"droneprod","requires.unittype":"","requires.val":"",rowNumber:6,unittype:"drone"},{"cost.factor":666,"cost.unittype":"queen","cost.val":66,description:"Queens produce more drones.","effect.stat":"prod","effect.type":"multStat","effect.unittype":"queen","effect.unittype2":"","effect.val":2,label:"faster queens",lol:"",maxlevel:"",name:"queenprod","requires.unittype":"","requires.val":"",rowNumber:7,unittype:"queen"},{"cost.factor":666,"cost.unittype":"nest","cost.val":66,description:"Nests produce more queens.","effect.stat":"prod","effect.type":"multStat","effect.unittype":"nest","effect.unittype2":"","effect.val":2,label:"faster nests",lol:"",maxlevel:"",name:"nestprod","requires.unittype":"","requires.val":"",rowNumber:8,unittype:"nest"},{"cost.factor":666,"cost.unittype":"greaterqueen","cost.val":66,description:"Greater queens produce more nests.","effect.stat":"prod","effect.type":"multStat","effect.unittype":"greaterqueen","effect.unittype2":"","effect.val":2,label:"faster greater queens",lol:"",maxlevel:"",name:"greaterqueenprod","requires.unittype":"","requires.val":"",rowNumber:9,unittype:"greaterqueen"},{"cost.factor":666,"cost.unittype":"hive","cost.val":66,description:"Hives produce more greater queens.","effect.stat":"prod","effect.type":"multStat","effect.unittype":"hive","effect.unittype2":"","effect.val":2,label:"faster hives",lol:"",maxlevel:"",name:"hiveprod","requires.unittype":"","requires.val":"",rowNumber:10,unittype:"hive"},{"cost.factor":666,"cost.unittype":"hivequeen","cost.val":66,description:"Hive queens produce more hives.","effect.stat":"prod","effect.type":"multStat","effect.unittype":"hivequeen","effect.unittype2":"","effect.val":2,label:"faster hive queens",lol:"",maxlevel:"",name:"hivequeenprod","requires.unittype":"","requires.val":"",rowNumber:11,unittype:"hivequeen"},{"cost.factor":666,"cost.unittype":"empress","cost.val":66,description:"Hive empresses produce more hive queens.","effect.stat":"prod","effect.type":"multStat","effect.unittype":"empress","effect.unittype2":"","effect.val":2,label:"faster hive empresses",lol:"",maxlevel:"",name:"empressprod","requires.unittype":"","requires.val":"",rowNumber:12,unittype:"empress"},{"cost.factor":666,"cost.unittype":"prophet","cost.val":66,description:"Hive prophets produce more hive empresses.","effect.stat":"prod","effect.type":"multStat","effect.unittype":"prophet","effect.unittype2":"","effect.val":2,label:"faster hive prophets",lol:"",maxlevel:"",name:"prophetprod","requires.unittype":"","requires.val":"",rowNumber:13,unittype:"prophet"},{"cost.factor":666,"cost.unittype":"goddess","cost.val":66,description:"Goddesses of the hive produce more hive prophets.","effect.stat":"prod","effect.type":"multStat","effect.unittype":"goddess","effect.unittype2":"","effect.val":2,label:"faster goddesses of the hive",lol:"",maxlevel:"",name:"goddessprod","requires.unittype":"","requires.val":"",rowNumber:14,unittype:"goddess"},{"cost.factor":666,"cost.unittype":"pantheon","cost.val":66,description:"Brood pantheons produce more goddesses of the hive.","effect.stat":"prod","effect.type":"multStat","effect.unittype":"pantheon","effect.unittype2":"","effect.val":2,label:"faster brood pantheons",lol:"",maxlevel:"",name:"pantheonprod","requires.unittype":"","requires.val":"",rowNumber:15,unittype:"pantheon"},{"cost.factor":666,"cost.unittype":"pantheon2","cost.val":66,description:"Pantheons of pantheons produce more pantheons.","effect.stat":"prod","effect.type":"multStat","effect.unittype":"pantheon2","effect.unittype2":"","effect.val":2,label:"faster pantheon of pantheons",lol:"Wow, could that description be any worse?",maxlevel:"",name:"pantheon2prod","requires.unittype":"","requires.val":"",rowNumber:16,unittype:"pantheon2"},{"cost.factor":500,"cost.unittype":"drone","cost.val":50,description:"Multiple drones hatch from each larvae. (This does not affect queen production.)","effect.stat":"twin","effect.type":"multStat","effect.unittype":"drone","effect.unittype2":"","effect.val":2,label:"twin drones",lol:"",maxlevel:"",name:"dronetwin","requires.unittype":"queen","requires.val":1,rowNumber:17,unittype:"drone"},{"cost.factor":500,"cost.unittype":"queen","cost.val":500,description:"Multiple queens hatch from each larvae. (This does not affect nest production.)","effect.stat":"twin","effect.type":"multStat","effect.unittype":"queen","effect.unittype2":"","effect.val":2,label:"twin queens",lol:"",maxlevel:"",name:"queentwin","requires.unittype":"nest","requires.val":1,rowNumber:18,unittype:"queen"},{"cost.factor":500,"cost.unittype":"nest","cost.val":500,description:"Multiple nests are constructed from each larvae. (This does not affect greater queen production.)","effect.stat":"twin","effect.type":"multStat","effect.unittype":"nest","effect.unittype2":"","effect.val":2,label:"twin nests",lol:"",maxlevel:"",name:"nesttwin","requires.unittype":"greaterqueen","requires.val":1,rowNumber:19,unittype:"nest"},{"cost.factor":500,"cost.unittype":"greaterqueen","cost.val":500,description:"Multiple greater queens hatch from each larvae. (This does not affect hive production.)","effect.stat":"twin","effect.type":"multStat","effect.unittype":"greaterqueen","effect.unittype2":"","effect.val":2,label:"twin greater queens",lol:"",maxlevel:"",name:"greaterqueentwin","requires.unittype":"hive","requires.val":1,rowNumber:20,unittype:"greaterqueen"},{"cost.factor":500,"cost.unittype":"hive","cost.val":500,description:"Multiple hives are constructed from each larvae. (This does not affect hive queen production.)","effect.stat":"twin","effect.type":"multStat","effect.unittype":"hive","effect.unittype2":"","effect.val":2,label:"twin hives",lol:"",maxlevel:"",name:"hivetwin","requires.unittype":"hivequeen","requires.val":1,rowNumber:21,unittype:"hive"},{"cost.factor":500,"cost.unittype":"hivequeen","cost.val":500,description:"Multiple hive queens are constructed from each larvae. (This does not affect hive empress production.)","effect.stat":"twin","effect.type":"multStat","effect.unittype":"hivequeen","effect.unittype2":"","effect.val":2,label:"twin hive queens",lol:"",maxlevel:"",name:"hivequeentwin","requires.unittype":"empress","requires.val":1,rowNumber:22,unittype:"hivequeen"},{"cost.factor":500,"cost.unittype":"empress","cost.val":500,description:"Multiple hive empresses hatch from each larvae. (This does not affect hive prophet production.)","effect.stat":"twin","effect.type":"multStat","effect.unittype":"empress","effect.unittype2":"","effect.val":2,label:"twin hive empresses",lol:"",maxlevel:"",name:"empresstwin","requires.unittype":"prophet","requires.val":1,rowNumber:23,unittype:"empress"},{"cost.factor":500,"cost.unittype":"prophet","cost.val":500,description:"Multiple hive prophets hatch from each larvae. (This does not affect goddess of the hive production.)","effect.stat":"twin","effect.type":"multStat","effect.unittype":"prophet","effect.unittype2":"","effect.val":2,label:"twin hive prophets",lol:"",maxlevel:"",name:"prophettwin","requires.unittype":"goddess","requires.val":1,rowNumber:24,unittype:"prophet"},{"cost.factor":500,"cost.unittype":"goddess","cost.val":500,description:"Multiple goddesses of the hive are summoned by each larvae. (This does not affect brood pantheon production.)","effect.stat":"twin","effect.type":"multStat","effect.unittype":"goddess","effect.unittype2":"","effect.val":2,label:"twin goddesses of the hive",lol:"",maxlevel:"",name:"goddesstwin","requires.unittype":"pantheon","requires.val":1,rowNumber:25,unittype:"goddess"},{"cost.factor":500,"cost.unittype":"pantheon","cost.val":500,description:"Multiple brood pantheons are created from each larvae. (This does not affect pantheon of pantheons production.)","effect.stat":"twin","effect.type":"multStat","effect.unittype":"pantheon","effect.unittype2":"","effect.val":2,label:"twin brood pantheons",lol:"",maxlevel:"",name:"pantheontwin","requires.unittype":"pantheon2","requires.val":1,rowNumber:26,unittype:"pantheon"},{"cost.factor":500,"cost.unittype":"pantheon2","cost.val":500,description:"Multiple pantheons of pantheons are created from each larvae.","effect.stat":"twin","effect.type":"multStat","effect.unittype":"pantheon2","effect.unittype2":"","effect.val":2,label:"twin pantheon of pantheons",lol:"",maxlevel:"",name:"pantheon2twin","requires.unittype":"","requires.val":"",rowNumber:27,unittype:"pantheon2"},{"cost.factor":7,"cost.unittype":"meat","cost.val":100,description:"Multiple swarmlings hatch from each larvae.","effect.stat":"twin","effect.type":"multStat","effect.unittype":"swarmling","effect.unittype2":"","effect.val":2,label:"twin swarmlings",lol:"",maxlevel:"",name:"swarmlingtwin","requires.unittype":"","requires.val":"",rowNumber:28,unittype:"swarmling"},{"cost.factor":42,"cost.unittype":"swarmling","cost.val":1,description:"","effect.stat":"","effect.type":"","effect.unittype":"","effect.unittype2":"","effect.val":"",label:"",lol:"",maxlevel:"",name:"swarmlingtwin","requires.unittype":"","requires.val":"",rowNumber:29,unittype:""},{"cost.factor":7,"cost.unittype":"meat","cost.val":17e3,description:"Multiple stingers hatch from each larvae.","effect.stat":"twin","effect.type":"multStat","effect.unittype":"stinger","effect.unittype2":"","effect.val":2,label:"twin stingers",lol:"",maxlevel:"",name:"stingertwin","requires.unittype":"","requires.val":"",rowNumber:30,unittype:"stinger"},{"cost.factor":43,"cost.unittype":"stinger","cost.val":1,description:"","effect.stat":"","effect.type":"","effect.unittype":"","effect.unittype2":"","effect.val":"",label:"",lol:"",maxlevel:"",name:"stingertwin","requires.unittype":"","requires.val":"",rowNumber:31,unittype:""},{"cost.factor":7,"cost.unittype":"meat","cost.val":187e4,description:"Multiple arachnomorphs hatch from each larvae.","effect.stat":"twin","effect.type":"multStat","effect.unittype":"spider","effect.unittype2":"","effect.val":2,label:"twin arachnomorphs",lol:"",maxlevel:"",name:"spidertwin","requires.unittype":"","requires.val":"",rowNumber:32,unittype:"spider"},{"cost.factor":44,"cost.unittype":"spider","cost.val":1,description:"","effect.stat":"","effect.type":"","effect.unittype":"","effect.unittype2":"","effect.val":"",label:"",lol:"",maxlevel:"",name:"spidertwin","requires.unittype":"","requires.val":"",rowNumber:33,unittype:""},{"cost.factor":7,"cost.unittype":"meat","cost.val":2057e5,description:"Multiple culicimorphs hatch from each larvae.","effect.stat":"twin","effect.type":"multStat","effect.unittype":"mosquito","effect.unittype2":"","effect.val":2,label:"twin culicimorphs",lol:"",maxlevel:"",name:"mosquitotwin","requires.unittype":"","requires.val":"",rowNumber:34,unittype:"mosquito"},{"cost.factor":45,"cost.unittype":"mosquito","cost.val":1,description:"","effect.stat":"","effect.type":"","effect.unittype":"","effect.unittype2":"","effect.val":"",label:"",lol:"",maxlevel:"",name:"mosquitotwin","requires.unittype":"","requires.val":"",rowNumber:35,unittype:""},{"cost.factor":7,"cost.unittype":"meat","cost.val":22627e6,description:"Multiple locusts hatch from each larvae.","effect.stat":"twin","effect.type":"multStat","effect.unittype":"locust","effect.unittype2":"","effect.val":2,label:"twin locusts",lol:"",maxlevel:"",name:"locusttwin","requires.unittype":"","requires.val":"",rowNumber:36,unittype:"locust"},{"cost.factor":46,"cost.unittype":"locust","cost.val":1,description:"","effect.stat":"","effect.type":"","effect.unittype":"","effect.unittype2":"","effect.val":"",label:"",lol:"",maxlevel:"",name:"locusttwin","requires.unittype":"","requires.val":"",rowNumber:37,unittype:""},{"cost.factor":7,"cost.unittype":"meat","cost.val":248897e7,description:"Multiple roaches hatch from each larvae.","effect.stat":"twin","effect.type":"multStat","effect.unittype":"roach","effect.unittype2":"","effect.val":2,label:"twin roaches",lol:"",maxlevel:"",name:"roachtwin","requires.unittype":"","requires.val":"",rowNumber:38,unittype:"roach"},{"cost.factor":47,"cost.unittype":"roach","cost.val":1,description:"","effect.stat":"","effect.type":"","effect.unittype":"","effect.unittype2":"","effect.val":"",label:"",lol:"",maxlevel:"",name:"roachtwin","requires.unittype":"","requires.val":"",rowNumber:39,unittype:""},{"cost.factor":7,"cost.unittype":"meat","cost.val":2737867e8,description:"Multiple giant arachnomorphs hatch from each larvae.","effect.stat":"twin","effect.type":"multStat","effect.unittype":"giantspider","effect.unittype2":"","effect.val":2,label:"twin giant arachnomorphs",lol:"",maxlevel:"",name:"giantspidertwin","requires.unittype":"","requires.val":"",rowNumber:40,unittype:"giantspider"},{"cost.factor":48,"cost.unittype":"giantspider","cost.val":1,description:"","effect.stat":"","effect.type":"","effect.unittype":"","effect.unittype2":"","effect.val":"",label:"",lol:"",maxlevel:"",name:"giantspidertwin","requires.unittype":"","requires.val":"",rowNumber:41,unittype:""},{"cost.factor":7,"cost.unittype":"meat","cost.val":301165e11,description:"Multiple chilopodomorphs hatch from each larvae.","effect.stat":"twin","effect.type":"multStat","effect.unittype":"centipede","effect.unittype2":"","effect.val":2,label:"twin chilopodomorphs",lol:"",maxlevel:"",name:"centipedetwin","requires.unittype":"","requires.val":"",rowNumber:42,unittype:"centipede"},{"cost.factor":49,"cost.unittype":"centipede","cost.val":1,description:"","effect.stat":"","effect.type":"","effect.unittype":"","effect.unittype2":"","effect.val":"",label:"",lol:"",maxlevel:"",name:"centipedetwin","requires.unittype":"","requires.val":"",rowNumber:43,unittype:""},{"cost.factor":7,"cost.unittype":"meat","cost.val":331282e13,description:"Multiple wasps hatch from each larvae.","effect.stat":"twin","effect.type":"multStat","effect.unittype":"wasp","effect.unittype2":"","effect.val":2,label:"twin wasps",lol:"",maxlevel:"",name:"wasptwin","requires.unittype":"","requires.val":"",rowNumber:44,unittype:"wasp"},{"cost.factor":50,"cost.unittype":"wasp","cost.val":1,description:"","effect.stat":"","effect.type":"","effect.unittype":"","effect.unittype2":"","effect.val":"",label:"",lol:"",maxlevel:"",name:"wasptwin","requires.unittype":"","requires.val":"",rowNumber:45,unittype:""},{"cost.factor":7,"cost.unittype":"meat","cost.val":36441e16,description:"Multiple devourers hatch from each larvae.","effect.stat":"twin","effect.type":"multStat","effect.unittype":"devourer","effect.unittype2":"","effect.val":2,label:"twin devourers",lol:"",maxlevel:"",name:"devourertwin","requires.unittype":"","requires.val":"",rowNumber:46,unittype:"devourer"},{"cost.factor":51,"cost.unittype":"devourer","cost.val":1,description:"","effect.stat":"","effect.type":"","effect.unittype":"","effect.unittype2":"","effect.val":"",label:"",lol:"",maxlevel:"",name:"devourertwin","requires.unittype":"","requires.val":"",rowNumber:47,unittype:""},{"cost.factor":7,"cost.unittype":"meat","cost.val":4.00851e22,description:"Multiple goons hatch from each larvae.","effect.stat":"twin","effect.type":"multStat","effect.unittype":"goon","effect.unittype2":"","effect.val":2,label:"twin goons",lol:"",maxlevel:"",name:"goontwin","requires.unittype":"","requires.val":"",rowNumber:48,unittype:"goon"},{"cost.factor":52,"cost.unittype":"goon","cost.val":1,description:"","effect.stat":"","effect.type":"","effect.unittype":"","effect.unittype2":"","effect.val":"",label:"",lol:"",maxlevel:"",name:"goontwin","requires.unittype":"","requires.val":"",rowNumber:49,unittype:""}],name:"upgrades"}}),function(){"use strict";
angular.module("swarmApp").factory("session",["env","$rootScope","$log","util",function(a,b,c,d){var e,f;return e=btoa("Cheater :(\n\n"),new(f=function(){function a(){this.reset()}return a.prototype.reset=function(){var a;return this.id=0,this.unittypes={},a=new Date,this.date={started:a,restarted:a,saved:a,loaded:a,reified:a},this.options={},this.upgrades={},this.statistics={},b.$emit("reset",{session:this})},a.prototype._replacer=function(a,b){return b},a.prototype._reviver=function(a,b){return b},a.prototype.jsonSaves=function(a){return null==a&&(a=this),JSON.stringify(a,this._replacer)},a.prototype._saves=function(a,b){var c;return null==a&&(a=this),null==b&&(b=!0),d.assert(null==a._exportCache,"exportCache is defined while saving: saves will contain saves. Uh-oh."),b&&(a.date.saved=new Date,delete a.date.loaded),c=this.jsonSaves(a),c=LZString.compressToBase64(c),c=e+c},a.prototype._loads=function(a){var b,c,d,f;a=a.substring(e.length),a=LZString.decompressFromBase64(a),c=JSON.parse(a,this._reviver),f=c.date;for(b in f)d=f[b],c.date[b]=new Date(d);return c.date.loaded=new Date,c},a.prototype.exportSave=function(){return null==this._exportCache&&(this._exportCache=this._saves(void 0,!1)),this._exportCache},a.prototype.importSave=function(a){var b;return b=this._loads(a),_.extend(this,b),this._exportCache=a},a.prototype.save=function(){return delete this._exportCache,this._exportCache=this._saves(),localStorage.setItem(this.id,this._exportCache),b.$emit("save",this)},a.prototype.load=function(a){return null==a&&(a=0),this.importSave(localStorage.getItem(a))},a}())}])}.call(this),function(){"use strict";angular.module("swarmApp").controller("DebugCtrl",["$scope","session","game","spreadsheet","env","unittypes","flashqueue","$timeout","$log","util",function(a,b,c,d,e,f,g,h,i,j){return a.dumps=[{title:"env",data:e},{title:"game",data:!!c},{title:"session",data:b},{title:"unittypes",data:!!f},{title:"spreadsheet",data:d}],a.notify=g,h(function(){return a.notify.push({label:"hihi",points:10,description:"ahaha"})},1e3),a.throwUp=function(){throw new Error("throwing up (test exception)")},a.assertFail=function(){return j.assert(!1,"throwing up (test assertion failure)")},a.error=function(){return j.error("throwing up (test util.error)")},a.form={},a.session=b,a.$watch("form.session",function(b,c){return b!==c?(i.debug("formsession update",b,a.session._saves(b,!1)),a.session.importSave(a.session._saves(JSON.parse(b),!1))):i.debug("formsession equal")}),a.$watch("session",function(){return i.debug("session update"),a.form.sessionExport=a.session.exportSave(),a.form.session=JSON.stringify(a.session._loads(a.form.sessionExport),void 0,2)}()),a.game=c,a.env=e,a.confirmReset=function(){return confirm("You will lose everything and restart the game. You sure?")?c.reset():void 0}}])}.call(this),function(){"use strict";angular.module("swarmApp").value("lazySpreadsheetUrl","https://docs.google.com/spreadsheets/d/1FgPdB1RzwCvK_gvfFuf0SU9dWJbAmYtewF8A-4SEIZM/pubhtml"),angular.module("swarmApp").factory("lazySpreadsheet",["$q","lazySpreadsheetUrl",function(a){var b;return b=a.defer(),Tabletop.init({key:spreadsheetUrl,parseNumbers:!0,debug:!0,callback:function(a,c){return b.resolve({data:a,tabletop:c})}}),b.promise}]),angular.module("swarmApp").factory("spreadsheet",["spreadsheetPreload",function(a){return{data:a}}])}.call(this),function(){"use strict";angular.module("swarmApp").factory("bignumFormatter",function(){return function(a){return function(b,c){var d,e;return null==c&&(c=0),c>b?b.toPrecision(3).replace(/\.?0+$/,""):(b=Math.floor(b),1e5>b?numeral(b).format("0,0"):(d=Math.floor(Math.log(b)/Math.log(1e3)),d>=a.length?b.toExponential(2).replace("e+","e"):(e=a[d],b/=Math.pow(1e3,d),""+b.toPrecision(3).replace(/\.$/,"")+e)))}}}),angular.module("swarmApp").filter("bignum",["bignumFormatter",function(a){return a(["","K","M","B","T","Qa","Qi","Sx","Sp","Oc","No","Dc"])}]),angular.module("swarmApp").filter("longnum",["bignumFormatter",function(a){return a([""," thousand"," million"," billion"," trillion"," quadrillion"," quintillion"," sextillion"," septillion"," octillion"," nonillion"," decillion"," undecillion"," duodecillion"," tredecillion"," quattuordecillion"," quinquadecillion"," sedecillion"," septendecillion"," octodecillion"," novendecillion"," vigintillion"," unvigintillion"," duovigintillion"," tresvigintillion"," quattuorvigintillion"," quinquavigintillion"," sesvigintillion"," septemvigintillion"," octovigintillion"," novemvigintillion"," trigintillion"," untrigintillion"," duotrigintillion"," trestrigintillion"," quattuortrigintillion"," quinquatrigintillion"," sestrigintillion"," septentrigintillion"," octotrigintillion"," noventrigintillion"," quadragintillion"," unquadragintillion"," duoquadragintillion"," tresquadragintillion"," quattuorquadragintillion"," quinquaquadragintillion"," sesquadragintillion"," septenquadragintillion"," octoquadragintillion"," novenquadragintillion"," quinquagintillion"," unquinquagintillion"," duoquinquagintillion"," tresquinquagintillion"," quattuorquinquagintillion"," quinquaquinquagintillion"," sesquinquagintillion"," septenquinquagintillion"," octoquinquagintillion"," novenquinquagintillion"," sexagintillion"," unsexagintillion"," duosexagintillion"," tresexagintillion"," quattuorsexagintillion"," quinquasexagintillion"," sesexagintillion"," septensexagintillion"," octosexagintillion"," novensexagintillion"," septuagintillion"," unseptuagintillion"," duoseptuagintillion"," treseptuagintillion"," quattuorseptuagintillion"," quinquaseptuagintillion"," seseptuagintillion"," septenseptuagintillion"," octoseptuagintillion"," novenseptuagintillion"," octogintillion"," unoctogintillion"," duooctogintillion"])}])}.call(this),function(){"use strict";var a=[].slice;angular.module("swarmApp").factory("spreadsheetUtil",["util",function(b){var c;return new(c=function(){function c(){}return c.prototype.defaultFilter=function(a){return!!a||_.isNumber(a)},c.prototype.setNested=function(b,c,d){var e,f,g,h,i,j,k;for(k=c,c=2<=k.length?a.call(k,0,h=k.length-1):(h=0,[]),f=k[h++],e=b,i=0,j=c.length;j>i;i++)g=c[i],null==e[g]&&(e[g]={}),e=e[g];return e[f]=d,b},c.prototype.getNested=function(a,b){var c,d,e,f;for(c=a,e=0,f=b.length;f>e;e++)d=b[e],c=c[d];return c},c.prototype.normalizeRow=function(a,b){var c,d,e,f;null==b&&(b=this.defaultFilter),e={};for(c in a)f=a[c],b(f)&&(d=c.split("."),this.setNested(e,d,f));return e},c.prototype.normalizeRows=function(a,b){var c,d,e,f;for(null==b&&(b=this.defaultFilter),f=[],d=0,e=a.length;e>d;d++)c=a[d],f.push(this.normalizeRow(c,b));return f},c.prototype.groupRows=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q;null==c&&(c=this.defaultFilter),m=[];for(f in a){if(i=a[f],e=_.groupBy(b,f),l=_.uniq(_.map(b,f)),_.isString(i)&&(i=[i]),!_.isArray(i))throw new Error("groupRows: nested groupings not supported yet");for(n=0,p=l.length;p>n;n++)for(g=l[n],d=e[g],m.push(k=_.clone(d[0])),o=0,q=i.length;q>o;o++)h=i[o],j=_.pluck(d,h),k[h]=_.filter(j,c)}return m},c.prototype.parseRows=function(a,b,c){var d;return null==c&&(c=this.defaultFilter),d=this.normalizeRows(b,c),this.groupRows(a,d,c)},c.prototype.resolveList=function(a,c,d,e){var f,g,h,i,j;for(null==e&&(e={}),null==e.required&&(e.required=!0),j=[],h=0,i=a.length;i>h;h++)g=a[h],f=g[c],g[c]=d[f],j.push(b.assert(g[c]||!e.required,"couldn't resolve ref: "+g+"."+c+"="+f,g,c,f,d[f],a));return j},c}())}])}.call(this),function(){"use strict";angular.module("swarmApp").config(["$provide",function(a){return a.decorator("$exceptionHandler",["$delegate","$injector",function(a,b){var c;return c=null,function(d,e){return a(d,e),null==c&&(c=b.get("$rootScope")),c.$emit("unhandledException",{exception:d,cause:e})}}])}])}.call(this),function(){"use strict";angular.module("swarmApp").factory("UnitType",function(){var a;return a=function(){function a(a){_.extend(this,a),this.producerPath={},this.producerPathList=[]}return a.prototype.producerNames=function(){return _.mapValues(this.producerPath,function(a){return _.map(a,function(a){return _.pluck(a,"name")})})},a}()}),angular.module("swarmApp").factory("UnitTypes",["spreadsheetUtil","UnitType","util","$log",function(a,b,c,d){var e;return e=function(){function e(a){var b,c,d;for(null==a&&(a=[]),this.list=[],this.byName={},c=0,d=a.length;d>c;c++)b=a[c],this.register(b)}return e.prototype.register=function(a){return this.list.push(a),this.byName[a.name]=a},e._buildProducerPath=function(a,b,c){var d,e,f,g,h,i,j;for(c=[b].concat(c),a.producerPathList.push(c),null==(e=a.producerPath)[h=b.name]&&(e[h]=[]),a.producerPath[b.name].push(c),i=b.producedBy,j=[],f=0,g=i.length;g>f;f++)d=i[f],j.push(this._buildProducerPath(a,d,c));return j},e.parseSpreadsheet=function(f){var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E;for(l=a.parseRows({name:["cost","prod","warnfirst","requires"]},f.data.unittypes.elements),j=new e(function(){var a,c,d;for(d=[],a=0,c=l.length;c>a;a++)k=l[a],d.push(new b(k));return d}()),z=j.list,n=0,r=z.length;r>n;n++)m=z[n],m.producedBy=[];for(A=j.list,o=0,s=A.length;s>o;o++){for(m=A[o],m.showparent&&a.resolveList([m],"showparent",j.byName),a.resolveList(m.cost,"unittype",j.byName),a.resolveList(m.prod,"unittype",j.byName),a.resolveList(m.warnfirst,"unittype",j.byName),a.resolveList(m.requires,"unittype",j.byName,{required:!1}),B=m.prod,p=0,t=B.length;t>p;p++)h=B[p],h.unittype.producedBy.push(m),c.assert(h.val>0,"unittype prod.val must be positive",h);for(C=m.cost,q=0,u=C.length;u>q;q++)g=C[q],c.assert(g.val>0,"unittype cost.val must be positive",g)}for(D=j.list,x=0,v=D.length;v>x;x++)for(m=D[x],E=m.producedBy,y=0,w=E.length;w>y;y++)i=E[y],this._buildProducerPath(m,i,[]);return d.debug("built unittypes",j),j},e}()}]),angular.module("swarmApp").factory("unittypes",["UnitTypes","spreadsheet",function(a,b){return a.parseSpreadsheet(b)}])}.call(this),function(){"use strict";angular.module("swarmApp").controller("UnitlistCtrl",["$scope","$routeParams","$location","$filter","$interval","game","options","commands","util","$log",function(a,b,c,d,e,f,g,h){var i,j,k,l,m,n,o;for(a.game=f,a.commands=h,a.options=g,a.form={mainBuynum:1},a.mainBuynum=function(){var b;return b=Math.max(1,Math.floor(a.form.mainBuynum)),_.isNaN(b)&&(b=1),b},a.selected=null!=b.unit?a.game.unit(b.unit):null,i=e(function(){return function(){return a.game.tick()}}(this),g.fpsSleepMillis()),a.$on("$destroy",function(){return function(){return e.cancel(i)}}(this)),a.isUpgrade25Visible=function(a){return a.maxCostMet(.25)>1&&a.maxCostMet()>a.maxCostMet(.25)},a.decimals=function(a){return a>100?Math.floor(a):a.toPrecision(3).replace(/\.?0+$/,"")},a.unitBuyTotal=function(b){return Math.min(b,a.selected.maxCostMet())*a.selected.stat("twin",1)},a.unitCostAsPercent=function(a,b){var c,d,e;return c=9999.99,d=b.unit.count(),0>=d?c:(e=Math.max(1,a.maxCostMet()),Math.min(c,b.val*e/d))},k={},o=a.game.unitlist(),l=0,m=o.length;m>l;l++)j=o[l],null==k[n=j.unittype.column]&&(k[n]=[]),k[j.unittype.column].push(j);return a.visibleUnitGroup=function(a){var b,c,d,e,f;for(e=null!=(d=k[a])?d:[],f=[],b=0,c=e.length;c>b;b++)j=e[b],j.isVisible()&&f.push(j);return f},a.isVisible=function(a){return a.isVisible()},a.isWarningVisible=function(a){return a.unit.count()<=a.val},a.select=function(b){return b!==a.selected?(a.selected=b,a.$emit("select",{unit:b})):void 0},a.costText=function(a){var b,c,e;return e=function(){var e,f;e=a.cost,f=[];for(c in e)b=e[c],f.push(""+d("bignum")(b.val)+" "+(1===b.val?b.unit.unittype.label:b.unit.unittype.plural));return f}(),e=e.join(", "),e&&(e="Cost: "+e),e},a.welcomeBackText=function(){return""},a.emptyText=function(){},a.tutText=function(){var a,b;if(a=f.countUnits(),b=f.countUpgrades(),b.expansion>=5)return null;if(b.expansion>0)return"Expansion is the key to growing your swarm rapidly. Build a large military to expand your territory and produce more larvae. Build more queens and, eventually, nests to produce more meat for your military.";if(b.hatchery>0){if(a.queen>=5)return a.territory>50?"Your warriors have captured a lot of territory, and soon you can secure your first expansion. Expansions increase larva production. Select 'Larva' to expand.":a.territory>0?"Your warriors have slowly begun securing territory. Continue expanding your military.":"Queens have rapidly grown your swarm, and your growth demands more territory. Begin capturing territory by building military units - swarmlings or stingers.";if(a.queen>0)return'Hatch more queens to grow your swarm. Hatching drones with the "Twin Drones" upgrade will allow you to rapidly raise more queens.'}return a.drone>=10?b.hatchery>0?"You lead a small brood of worker drones. They long for a queen. You must sacrifice many drones to hatch a queen, but once born, your queen will slowly hatch drones without consuming meat or larvae.":"You lead a small brood of worker drones. Once you have plenty of meat, upgrade your hatchery to produce more larvae by selecting 'Larva' and spending some meat.":a.drone>0?"You lead a small brood of worker drones. Drones gather meat. Use this meat to build more drones and expand your brood.":"Your brood starts its life with a small pile of meat and a single larva-producing hatchery. Larvae mutate into other units. Begin your growth by using your meat and larvae to hatch some drones."}}])}.call(this),function(){"use strict";angular.module("swarmApp").controller("HeaderCtrl",["$scope","$window","env","version","session","analytics","statistics","timecheck","versioncheck","$http","$interval","$log",function(a,b,c,d,e,f,g,h,i,j,k,l){var m,n;return a.env=c,a.version=d,a.session=e,(m=function(){return h.enforceNetTime().then(function(b){return l.debug("net time check successful",b),a.netTimeInvalid=b,b?(l.debug("cheater",b),$(".viewwrap").before('<div><p class="cheater">There is a problem with your system clock.</p><p>If you don\'t know why you\'re seeing this, <a target="_blank" href="http://www.reddit.com/r/swarmsim">ask about it here</a>.</p></div>'),$(".viewwrap").css({display:"none"}),$(".footer").css({display:"none"}),k.cancel(n)):void 0},function(){return l.warn("failed to check net time")})})(),n=k(m,18e5),a.feedbackUrl=function(){var b,c;return b=""+d+"|"+("undefined"!=typeof window&&null!==window&&null!=(c=window.navigator)?c.userAgent:void 0)+"|"+a.session.exportSave(),"https://docs.google.com/forms/d/1yH2oNcjUJiggxQhoP3pwijWU-nZkT-hJsqOR-5_cwrI/viewform?entry.436676437="+encodeURIComponent(b)},a.isNonprod=function(){return a.env&&"prod"!==a.env}}])}.call(this),function(){"use strict";angular.module("swarmApp").factory("Effect",["util",function(a){var b;return b=function(){function b(b,c,d){this.game=b,this.upgrade=c,_.extend(this,d),null!=d.unittype&&(this.unit=a.assert(this.game.unit(d.unittype))),null!=d.unittype2&&(this.unit2=a.assert(this.game.unit(d.unittype2)))}return b.prototype.onBuy=function(){var a;return"function"==typeof(a=this.type).onBuy?a.onBuy(this,this.game,this.upgrade):void 0},b.prototype.calcStats=function(a,b,c){var d;return"function"==typeof(d=this.type).calcStats?d.calcStats(this,a,b,c):void 0},b}()}]),angular.module("swarmApp").factory("Upgrade",["util","Effect","$log",function(a,b,c){var d;return d=function(){function d(b,c){this.game=b,this.type=c,this.name=this.type.name,this.unit=a.assert(this.game.unit(this.type.unittype)),this._totalCost=_.memoize(this._totalCost)}return d.prototype._init=function(){return this.costByName={},this.cost=_.map(this.type.cost,function(b){return function(c){var d;return a.assert(c.unittype,"upgrade cost without a unittype",b.name,name,c),d=_.clone(c),d.unit=a.assert(b.game.unit(c.unittype)),b.costByName[d.unit.name]=d,d}}(this)),this.requires=_.map(this.type.requires,function(b){return function(c){var d;return a.assert(c.unittype,"upgrade require without a unittype",b.name,name,c),d=_.clone(c),d.unit=a.assert(b.game.unit(c.unittype)),d}}(this)),this.effect=_.map(this.type.effect,function(a){return function(c){return new b(a.game,a,c)}}(this))},d.prototype.count=function(){var b,c;return b=null!=(c=this.game.session.upgrades[this.name])?c:0,_.isNaN(b)&&(a.error("count is NaN! resetting to zero. "+this.name),b=0),b},d.prototype._setCount=function(b){return this.game.session.upgrades[this.name]=b,a.clearMemoCache(this._totalCost,this.unit._stats)},d.prototype._addCount=function(a){return this._setCount(this.count()+a)},d.prototype._subtractCount=function(a){return this._addCount(-a)},d.prototype.isVisible=function(){return null!=this.type.maxlevel&&this.count()>=this.type.maxlevel?!1:this.type.disabled?!1:this._visible?!0:this._visible=this._isVisible()},d.prototype._isVisible=function(){var a,b,c,d;if(this.count()>0)return!0;for(d=this.requires,b=0,c=d.length;c>b;b++)if(a=d[b],a.val>a.unit.count())return!1;return!0},d.prototype.totalCost=function(){return this._totalCost(this.count())},d.prototype._totalCost=function(a){return null==a&&(a=this.count()),_.map(this.cost,function(b){var c;return c=_.clone(b),c.val*=Math.pow(c.factor,a),c})},d.prototype.sumCost=function(a){return _.map(this.totalCost(),function(b){var c;return c=_.clone(b),c.val*=1===c.factor?a:(1-Math.pow(c.factor,a))/(1-c.factor),c})},d.prototype.isCostMet=function(){var b,c,d,e,f;for(c=Number.MAX_VALUE,f=this.totalCost(),d=0,e=f.length;e>d;d++)b=f[d],b.val>0&&(c=Math.min(c,b.unit.count()/b.val));return c=Math.floor(c),a.assert(c>=0,"invalid max",c),c>0},d.prototype.maxCostMet=function(b){var c,d,e,f,g,h;for(null==b&&(b=1),e=this.type.maxlevel||Number.MAX_VALUE,h=this.totalCost(),f=0,g=h.length;g>f;f++)c=h[f],a.assert(c.val>0,"upgrade cost <= 0",this.name,this),d=1===c.factor?c.unit.count()/c.val:Math.log(1-c.unit.count()*b*(1-c.factor)/c.val)/Math.log(c.factor),e=Math.min(e,d);return Math.floor(e)},d.prototype.isBuyable=function(){return this.isCostMet()&&this.isVisible()},d.prototype.buy=function(b){if(null==b&&(b=1),!this.isCostMet())throw new Error("We require more resources");if(!this.isBuyable())throw new Error("Cannot buy that upgrade");return b=Math.min(b,this.maxCostMet()),c.debug("buy",this.name,b),this.game.withSave(function(c){return function(){var d,e,f,g,h,i,j,k,l,m;for(l=c.sumCost(b),g=0,j=l.length;j>g;g++)d=l[g],a.assert(d.unit.count()>=d.val,"tried to buy more than we can afford. upgrade.maxCostMet is broken!",c.name,name,d),a.assert(d.val>0,"zero cost from sumCost, yet cost was met?",c.name,name,d),d.unit._subtractCount(d.val);for(c._addCount(b),f=h=0;b>=0?b>h:h>b;f=b>=0?++h:--h)for(m=c.effect,i=0,k=m.length;k>i;i++)e=m[i],e.onBuy();return b}}(this))},d.prototype.buyMax=function(a){return this.buy(this.maxCostMet(a))},d.prototype.stats=function(a,b){var c,d,e,f,g;for(c=this.count(),g=this.effect,e=0,f=g.length;f>e;e++)d=g[e],d.calcStats(a,b,c);return a},d}()}]),angular.module("swarmApp").factory("Unit",["util","$log",function(a){var b;return b=function(){function b(a,b){this.game=a,this.unittype=b,this.name=this.unittype.name,this._stats=_.memoize(this._stats),this._count=_.memoize(this._count),this._velocity=_.memoize(this._velocity)}return b.prototype._init=function(){var b,c,d,e,f;for(this._producerPathList=_.map(this.unittype.producerPathList,function(b){return function(c){return _.map(c,function(c){var d;return d=b.game.unit(c),a.assert(d),d})}}(this)),this.cost=_.map(this.unittype.cost,function(a){return function(b){var c;return c=_.clone(b),c.unit=a.game.unit(b.unittype),c}}(this)),this.prodByName={},this.prod=_.map(this.unittype.prod,function(a){return function(b){var c;return c=_.clone(b),c.unit=a.game.unit(b.unittype),a.prodByName[c.unit.name]=c,c}}(this)),this.warnfirst=_.map(this.unittype.warnfirst,function(a){return function(b){var c;return c=_.clone(b),c.unit=a.game.unit(b.unittype),c}}(this)),this.upgrades={list:function(){var a,c,d,e;for(d=this.game.upgradelist(),e=[],a=0,c=d.length;c>a;a++)b=d[a],this.unittype===b.type.unittype&&e.push(b);return e}.call(this),byName:{}},this.showparent=this.game.unit(this.unittype.showparent),this.requires=_.map(this.unittype.requires,function(b){return function(c){var d;return a.assert(c.unittype||c.upgradetype,"unit require without a unittype or upgradetype",b.name,name,c),a.assert(!(c.unittype&&c.upgradetype),"unit require with both unittype and upgradetype",b.name,name,c),d=_.clone(c),null!=c.unittype&&(d.resource=d.unit=a.assert(b.game.unit(c.unittype))),null!=c.upgradetype&&(d.resource=d.upgrade=a.assert(b.game.upgrade(c.upgradetype))),d}}(this)),e=this.upgrades.list,f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(this.upgrades.byName[b.name]=b);return f},b.prototype._producerPathData=function(){return _.map(this._producerPathList,function(b){return function(c){var d;return d=c.concat([b]),_.map(c,function(b,c){var e,f,g;return e=d[c+1],g=function(){var a,c,d,g;for(d=b.prod,g=[],a=0,c=d.length;c>a;a++)f=d[a],f.unit.name===e.name&&g.push(f);return g}(),a.assert(1===g.length),g=g[0],{parent:b,child:e,prod:f}})}}(this))},b.prototype.rawCount=function(){var a,b;return a=null!=(b=this.game.session.unittypes[this.name])?b:0,_.isNaN(a)&&(a=0),a},b.prototype._setCount=function(b){return this.game.session.unittypes[this.name]=b,a.clearMemoCache(this._count,this._velocity)},b.prototype._addCount=function(a){return this._setCount(this.rawCount()+a)},b.prototype._subtractCount=function(a){return this._addCount(-a)},b.prototype._gainsPath=function(a,b){var c,d,e,f,g,h,i,j,k;for(h=a[0],g=a.length,e=math.factorial(g),f=h.parent.rawCount(),d=1,j=0,k=a.length;k>j;j++)c=a[j],i=c.prod.val+c.parent.stat("base",0),d*=i*c.parent.stat("prod",1);return f*d/e*math.pow(b,g)},b.prototype._parents=function(){var a,b,c,d,e;for(d=this._producerPathData(),e=[],b=0,c=d.length;c>b;b++)a=d[b],a[0].parent.prodByName[this.name]&&e.push(a[0].parent);return e},b.prototype.count=function(){return this._count(this.game.now.getTime())},b.prototype._count=function(){var b,c,d,e,f,g;for(a.clearMemoCache(this._count),d=this.game.diffSeconds(),b=this.rawCount(),g=this._producerPathData(),e=0,f=g.length;f>e;e++)c=g[e],b+=this._gainsPath(c,d);return b},b.prototype._costMetPercent=function(){var b,c,d,e,f;for(c=Number.MAX_VALUE,f=this.cost,d=0,e=f.length;e>d;d++)b=f[d],b.val>0&&(c=Math.min(c,b.unit.count()/b.val));return a.assert(c>=0,"invalid max",c),c},b.prototype.isVisible=function(){return this.unittype.disabled?!1:this._visible?!0:this._visible=this._isVisible()},b.prototype._isVisible=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m;if(this.count()>0)return!0;if(this.requires.length>0){for(k=this.requires,e=0,h=k.length;h>e;e++)if(d=k[e],d.val>d.resource.count())return!1;return!0}if(this.cost.length>0){if(this._costMetPercent()>.3)return!0;for(l=this.prod,f=0,i=l.length;i>f;f++)if(b=l[f],b.unit.unittype.tier&&b.unit.count()>=5)return!0;return!1}for(m=this._producerPathList,g=0,j=m.length;j>g;g++)if(a=m[g],c=a[0],c.isVisible())return!0;return!1},b.prototype.isBuyButtonVisible=function(){var a,b,c,d;for(d=this.cost,b=0,c=d.length;c>b;b++)if(a=d[b],!a.unit.isVisible())return!1;return!0},b.prototype.maxCostMet=function(a){return null==a&&(a=1),Math.floor(this._costMetPercent()*a)},b.prototype.isCostMet=function(){return this.maxCostMet()>0},b.prototype.isBuyable=function(){return this.isCostMet()&&this.isVisible()&&!this.unittype.unbuyable},b.prototype.buyMax=function(a){return this.buy(this.maxCostMet(a))},b.prototype.buy=function(a){if(null==a&&(a=1),!this.isCostMet())throw new Error("We require more resources");if(!this.isBuyable())throw new Error("Cannot buy that unit");return a=Math.min(a,this.maxCostMet()),this.game.withSave(function(b){return function(){var c,d,e,f,g;for(g=b.cost,e=0,f=g.length;f>e;e++)c=g[e],c.unit._subtractCount(c.val*a);return d=a*b.stat("twin",1),b._addCount(d),{num:a,twinnum:d}}}(this))},b.prototype.totalProduction=function(){var a,b,c,d,e;c={},a=this.count(),e=this.eachProduction();for(b in e)d=e[b],c[b]=d*a;return c},b.prototype.eachProduction=function(){var a,b,c,d,e;for(b={},e=this.prod,c=0,d=e.length;d>c;c++)a=e[c],b[a.unit.unittype.name]=(a.val+this.stat("base",0))*this.stat("prod",1);return b},b.prototype.velocity=function(){return this._velocity(this.game.now.getTime())},b.prototype._velocity=function(){var b,c,d,e,f,g;for(a.clearMemoCache(this._velocity),d=0,g=this._parents(),e=0,f=g.length;f>e;e++)b=g[e],c=b.totalProduction(),a.assert(null!=c[this.name],"velocity: a unit's parent doesn't produce that unit?",this.name,b.name),d+=c[this.name];return d},b.prototype.hasStat=function(a,b){return null==b&&(b=void 0),null!=this.stats()[a]&&this.stats()[a]!==b},b.prototype.stat=function(b,c){var d,e;return null==c&&(c=void 0),a.assert(null!=b),d=null!=(e=this.stats()[b])?e:c,a.assert(null!=d,"no such stat",this.name,b),d},b.prototype.stats=function(){return this._stats()},b.prototype._stats=function(){var a,b,c,d,e,f;for(b={},a={},f=this.upgrades.list,d=0,e=f.length;e>d;d++)c=f[d],c.stats(b,a);return b},b}()}]),angular.module("swarmApp").factory("Game",["unittypes","upgradetypes","util","Upgrade","Unit",function(a,b,c,d,e){var f;return f=function(){function f(a){this.session=a,this._init()}return f.prototype._init=function(){var c,f,g,h,i,j,k,l,m,n,o;for(this._units={list:_.map(a.list,function(a){return function(b){return new e(a,b)}}(this)),byName:{}},l=this._units.list,h=0,j=l.length;j>h;h++)f=l[h],this._units.byName[f.name]=f;for(this._upgrades={list:_.map(b.list,function(a){return function(b){return new d(a,b)}}(this)),byName:{}},m=this._upgrades.list,i=0,k=m.length;k>i;i++)g=m[i],this._upgrades.byName[g.name]=g;n=this._units.list;for(c in n)f=n[c],f._init();o=this._upgrades.list;for(c in o)g=o[c],g._init();return this.tick()},f.prototype.diffMillis=function(){return this.now.getTime()-this.session.date.reified.getTime()},f.prototype.diffSeconds=function(){return this.diffMillis()/1e3},f.prototype.tick=function(a){return null==a&&(a=new Date),c.assert(a,"can't tick to undefined time",a),c.assert(!this.now||this.now<=a,"tick tried to go back in time. System clock problem?",this.now,a),this.now=a},f.prototype.elapsedStartMillis=function(){return this.now.getTime()-this.session.date.started.getTime()},f.prototype.unit=function(a){return _.isUndefined(a)?void 0:(_.isString(a)||(a=a.name),this._units.byName[a])},f.prototype.units=function(){return _.clone(this._units.byName)},f.prototype.unitlist=function(){return _.clone(this._units.list)},f.prototype.count=function(a,b){return this.unit(a).count(b)},f.prototype.counts=function(){return this.countUnits()},f.prototype.countUnits=function(){return _.mapValues(this.units(),function(){return function(a){return a.count()}}(this))},f.prototype.countUpgrades=function(){return _.mapValues(this.upgrades(),function(){return function(a){return a.count()}}(this))},f.prototype.upgrade=function(a){return _.isString(a)||(a=a.name),this._upgrades.byName[a]},f.prototype.upgrades=function(){return _.clone(this._upgrades.byName)},f.prototype.upgradelist=function(){return _.clone(this._upgrades.list)},f.prototype.reify=function(){var a,b;return b=this.diffSeconds(),a=this.counts(b),_.extend(this.session.unittypes,a),this.session.date.reified=this.now,c.assert(0===this.diffSeconds())},f.prototype.save=function(){return this.withSave(function(){})},f.prototype.importSave=function(a){return this.session.importSave(a),this._init(),this.session.save()},f.prototype.withSave=function(a){var b;return this.reify(),b=a(),this.session.save(),b},f.prototype.reset=function(){var a,b,c,d;for(this.session.reset(),this._init(),d=this.unitlist(),b=0,c=d.length;c>b;b++)a=d[b],a._setCount(a.unittype.init);return this.save()},f}()}]),angular.module("swarmApp").factory("game",["Game","session","env","$log",function(a,b,c,d){var e;e=new a(b);try{b.load(),d.debug("Game data loaded successfully.",this)}catch(f){"test"!==c&&d.warn("Failed to load saved data! Resetting."),e.reset()}return e}])}.call(this),function(){"use strict";angular.module("swarmApp").factory("Options",["$log",function(a){var b;return b=function(){function b(a){this.session=a}return b.prototype.maybeSet=function(b,c){return null!=c?(a.debug("set fps",b,c),this.set(b,c)):void 0},b.prototype.set=function(a,b){return this.session.options[a]=b,this.session.save()},b.prototype.get=function(a,b){var c;return null!=(c=this.session.options[a])?c:b},b.prototype.reset=function(a){return delete this.session.options[a]},b.prototype.fps=function(a){return this.maybeSet("fps",a),Math.min(60,Math.max(1,this.get("fps",10)))},b.prototype.fpsSleepMillis=function(){return 1e3/this.fps()},b.prototype.showAdvancedUnitData=function(a){return this.maybeSet("showAdvancedUnitData",a),!!this.get("showAdvancedUnitData")},b}()}]),angular.module("swarmApp").factory("options",["Options","session",function(a,b){return new a(b)}])}.call(this),function(){"use strict";angular.module("swarmApp").controller("OptionsCtrl",["$scope","$location","options","session","game","$log",function(a,b,c,d,e,f){return a.options=c,a.game=e,a.session=d,a.imported={},a.dateStarted=function(){return a.game.session.date.started},a.dateStartedAgo=function(){return moment(a.dateStarted()).fromNow()},a.select=function(a){return a.target.select()},a.importSave=function(b){var c;a.imported={};try{return a.game.importSave(b),a.imported.success=!0,a.$emit("import",{success:!0}),f.debug("import success")}catch(d){return c=d,a.imported.error=!0,a.$emit("import",{success:!1}),f.warn("import error",c)}},a.confirmReset=function(){return confirm("You will lose everything and restart the game. No reset-bonuses here. You sure?")?(a.game.reset(),b.url("/")):void 0}}])}.call(this),function(){"use strict";angular.module("swarmApp").factory("UpgradeType",function(){var a;return a=function(){function a(a){_.extend(this,a)}return a}()}),angular.module("swarmApp").factory("UpgradeTypes",["spreadsheetUtil","UpgradeType","util",function(a,b,c){var d;return d=function(){function d(a,b){var c,d,e;for(this.unittypes=a,null==b&&(b=[]),this.list=[],this.byName={},d=0,e=b.length;e>d;d++)c=b[d],this.register(c)}return d.prototype.register=function(a){return c.assert(a.name,"upgrade without a name",a),this.list.push(a),this.byName[a.name]=a},d.parseSpreadsheet=function(e,f,g){var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;for(k=a.parseRows({name:["requires","cost","effect"]},g.data.upgrades.elements),i=new d(e,function(){var a,c,d;for(d=[],a=0,c=k.length;c>a;a++)j=k[a],j.name&&d.push(new b(j));return d}()),t=i.list,n=0,q=t.length;q>n;n++)for(m=t[n],a.resolveList([m],"unittype",e.byName),a.resolveList(m.cost,"unittype",e.byName),a.resolveList(m.requires,"unittype",e.byName),a.resolveList(m.effect,"unittype",e.byName),a.resolveList(m.effect,"type",f.byName),u=m.cost,o=0,r=u.length;r>o;o++)h=u[o],c.assert(h.val>0,"upgradetype cost.val must be positive",h),1===m.maxlevel&&(h.factor=1),c.assert(h.factor>0,"upgradetype cost.factor must be positive",h);for(v=e.list,p=0,s=v.length;s>p;p++)l=v[p],a.resolveList(l.requires,"upgradetype",i.byName,{required:!1});return i},d}()}]),angular.module("swarmApp").factory("upgradetypes",["UpgradeTypes","unittypes","effecttypes","spreadsheet",function(a,b,c,d){return a.parseSpreadsheet(b,c,d)}])}.call(this),function(){"use strict";var a=[].slice;angular.module("swarmApp").factory("util",["$log","$rootScope",function(b,c){var d;return new(d=function(){function d(){}return d.prototype.sum=function(a){return _.reduce(a,function(a,b){return a+b},0)},d.prototype.assert=function(){var d,e;if(e=arguments[0],d=2<=arguments.length?a.call(arguments,1):[],!e)throw b.error.apply(b,["Assertion error"].concat(a.call(d))),c.$emit("assertionFailure",d),new Error(d);return e},d.prototype.error=function(){var b;return b=1<=arguments.length?a.call(arguments,0):[],c.$emit("error",b)},d.prototype.walk=function(a,b,c,d){var e,f,g,h,i,j,k;if(null==c&&(c=""),null==d&&(d=[]),i=b(a,c),null!=i&&d.push(i),_.isArray(a))for(f=j=0,k=a.length;k>j;f=++j)e=a[f],this.walk(e,b,""+c+"["+f+"]",d);else if(_.isObject(a))for(g in a)h=a[g],this.walk(h,b,""+c+"."+g,d);return d},d.prototype.clearMemoCache=function(){var b,c,d,e,f,g,h;for(d=1<=arguments.length?a.call(arguments,0):[],h=[],f=0,g=d.length;g>f;f++)b=d[f],h.push(function(){var a,d;
a=b.cache,d=[];for(c in a)e=a[c],d.push(delete b.cache[c]);return d}());return h},d}())}])}.call(this),function(){"use strict";angular.module("swarmApp").factory("EffectType",function(){var a;return a=function(){function a(a){_.extend(this,a)}return a}()}),angular.module("swarmApp").factory("EffectTypes",function(){var a;return a=function(){function a(a){var b,c,d;for(null==a&&(a=[]),this.list=[],this.byName={},c=0,d=a.length;d>c;c++)b=a[c],this.register(b)}return a.prototype.register=function(a){return this.list.push(a),this.byName[a.name]=a,this},a}()}),angular.module("swarmApp").factory("effecttypes",["EffectType","EffectTypes","util",function(a,b,c){var d,e,f,g;return d=new b,e=function(a){return c.assert(null!=a.unit),c.assert(null!=a.val)},f=function(a){return c.assert(null!=a.unit),c.assert(null!=a.stat),c.assert(null!=a.val)},g=function(a,b,d){return null==b[a]&&(b[a]=d),c.assert(b[a]===d,"conflicting stat operations. expected "+d+", got "+b[a],a,b,d)},d.register(new a({name:"addUnit",validate:e,onBuy:function(a){return a.unit._addCount(a.val)}})),d.register(new a({name:"compoundUnit",validate:e,onBuy:function(a){var b;return b=a.unit.count(),null!=a.unit2&&(b+=a.unit2.count()),a.unit._addCount(b*(a.val-1))}})),d.register(new a({name:"multStat",validate:f,calcStats:function(a,b,c,d){var e;return g(a.stat,c,"mult"),null==b[e=a.stat]&&(b[e]=1),b[a.stat]*=Math.pow(a.val,d)}})),d.register(new a({name:"addStat",validate:f,calcStats:function(a,b,c,d){var e;return g(a.stat,c,"add"),null==b[e=a.stat]&&(b[e]=0),b[a.stat]+=a.val*d}})),d}])}.call(this),function(){"use strict";angular.module("swarmApp").value("analyticsDimensionList",["version"]),angular.module("swarmApp").factory("analyticsDimensions",["analyticsDimensionList",function(a){var b,c,d,e,f;for(d={},b=0,e=0,f=a.length;f>e;e++)c=a[e],d[c]="dimension"+ ++b;return d}]),angular.module("swarmApp").value("analyticsMetricList",["saveFileChars","clickLogChars"]),angular.module("swarmApp").factory("analyticsMetrics",["analyticsMetricList",function(a){var b,c,d,e,f;for(d={},b=0,e=0,f=a.length;f>e;e++)c=a[e],d[c]="metric"+ ++b;return d}]),angular.module("swarmApp").factory("analytics",["$rootScope","$analytics","env","game","version","analyticsDimensions","analyticsMetrics","statistics","session","$log",function(a,b,c,d,e,f,g,h,i,j){var k,l,m,n,o;return l=f,o=g,"test"!==c&&null!=window.ga?(window.ga("set",l.version,e),a.$on("select",function(a,c){var d,e,f;return d=null!=(e=null!=c&&null!=(f=c.unit)?f.name:void 0)?e:"#back-button",b.pageTrack("/unit/"+d)}),a.$on("save",function(){return window.ga("set",o.saveFileChars,i.exportSave().length),window.ga("set",o.clickLogChars,h.replay.compressToUTF16().length)}),a.$on("command",function(a,c){var d,e;return b.eventTrack(c.name,{category:"command",label:null!=(d=c.unitname)?d:c.upgradename,value:null!=(e=c.twinnum)?e:c.num})}),a.$on("buyFirst",function(a,c){var d;return b.eventTrack("buyFirst:"+c.name,{category:"buyFirst",label:null!=(d=c.unitname)?d:c.upgradename,value:c.elapsed})}),a.$on("reset",function(){return b.eventTrack("reset",{category:"reset"})}),a.$on("import",function(a,c){return b.eventTrack("import",{category:"import",value:c.success?1:0})}),a.$on("timecheckFailed",function(){return b.eventTrack("timecheckFailed",{category:"timecheck"})}),a.$on("timecheckError",function(){return b.eventTrack("timecheckError",{category:"timecheck"})}),m=0,k=12,n=function(a,c){return m+=1,k>=m&&(c=_.isString(c)?c:JSON.stringify(c),j.debug("logging error to google analytics",{category:"error",action:a,label:c}),b.eventTrack(a,{category:"error",label:c}),m===k)?(j.warn("error threshold reached, no more errors will be reported to analytics"),b.eventTrack("maxErrorCount",{category:"error",label:"too many errors logged to analytics this session, future errors will not be logged"})):void 0},a.$on("unhandledException",function(a,b){var c,d,e,f;try{return null!=(null!=(e=b.exception)?e.name:void 0)&&null!=(null!=(f=b.exception)?f.message:void 0)?d=""+b.exception.name+": "+b.exception.message:(d=_.isString(b.exception)?b.exception:JSON.stringify(b.exception),d="Unknown exception: "+d),n("unhandledException",d)}catch(g){return c=g,n("unhandledExceptionLoop",""+(null!=c?c.name:void 0)+": "+(null!=c?c.message:void 0))}}),a.$on("error",function(a,b){return n("emittedError",b)}),a.$on("assertionFailure",function(a,b){return n("assertionFailure",b)})):void 0}])}.call(this),function(){"use strict";angular.module("swarmApp").controller("ChangelogCtrl",["$scope",function(){}])}.call(this),function(){"use strict";angular.module("swarmApp").factory("commands",["util","$rootScope",function(a,b){var c;return new(c=function(){function c(){}return c.prototype._emit=function(c,d){return a.assert(null==d.name,"command has a name already?"),d.name=c,b.$emit("command",d)},c.prototype.buyUnit=function(a){var b,c,d;return d=a.unit,c=a.num,b=d.buy(c),this._emit("buyUnit",{unit:d,unitname:d.name,now:d.game.now,elapsed:d.game.elapsedStartMillis(),attempt:c,num:b.num,twinnum:b.twinnum,ui:a.ui})},c.prototype.buyMaxUnit=function(a){var b,c;return c=a.unit,b=c.buyMax(a.percent),this._emit("buyMaxUnit",{unit:c,unitname:c.name,now:c.game.now,elapsed:c.game.elapsedStartMillis(),num:b.num,twinnum:b.twinnum,percent:a.percent,ui:a.ui})},c.prototype.buyUpgrade=function(a){var b,c;return c=a.upgrade,b=c.buy(a.num),this._emit("buyUpgrade",{upgrade:c,upgradename:c.name,now:c.game.now,elapsed:c.game.elapsedStartMillis(),num:b,ui:a.ui})},c.prototype.buyMaxUpgrade=function(a){var b,c;return c=a.upgrade,b=c.buyMax(a.percent),this._emit("buyMaxUpgrade",{upgrade:c,upgradename:c.name,now:c.game.now,elapsed:c.game.elapsedStartMillis(),num:b,percent:a.percent,ui:a.ui})},c}())}])}.call(this),function(){"use strict";angular.module("swarmApp").factory("ReplayLog",["$log","util","$rootScope","env",function(a,b,c,d){var e;return e=function(){function b(a,b){this.id=a,this.log=null!=b?b:[],this._init()}return b.prototype._init=function(){return this.tryLoad()},b.prototype.push=function(b){return this.log.push(b),this._cachedSave=this.save(),a.debug("saving replay",this._cachedSave.length),c.$emit("replay:save",this)},b.prototype.reset=function(){return this.log.length=0,this.save()},b.prototype.compressToUTF16=function(){return LZString.compressToUTF16(JSON.stringify(this.log))},b.prototype.compressToBase64=function(){return LZString.compressToBase64(JSON.stringify(this.log))},b.prototype.save=function(){var a,b;return a=JSON.stringify(this.log),a=LZString.compressToUTF16(a),b="replay:"+this.id,a},b.prototype.load=function(){return localStorage.removeItem("replay:"+this.id)},b.prototype.tryLoad=function(){var b;try{return this.load()}catch(c){if(b=c,"test"!==d)return a.warn("couldn't load replay log, ignoring.",b)}},b}()}]),angular.module("swarmApp").factory("StatisticsListener",["util","ReplayLog","$log",function(a,b,c){var d;return d=function(){function a(a,c){this.session=a,this.scope=c,this.replay=new b(a.id),this._init()}return a.prototype._init=function(){var a,b;return a=null!=(b=this.session).statistics?b.statistics:b.statistics={},null==a.byUnit&&(a.byUnit={}),null==a.byUpgrade&&(a.byUpgrade={}),null==a.clicks&&(a.clicks=0),this.replay.tryLoad()},a.prototype.push=function(a){var b,c;return b=this.session.statistics,b.clicks+=1,null!=a.unitname&&(c=b.byUnit[a.unitname],null==c&&(c=b.byUnit[a.unitname]={clicks:0,num:0,twinnum:0,elapsedFirst:a.elapsed},this.scope.$emit("buyFirst",a)),c.clicks+=1,c.num+=a.num,c.twinnum+=a.twinnum),null!=a.upgradename&&(c=b.byUpgrade[a.upgradename],null==c&&(c=b.byUpgrade[a.upgradename]={clicks:0,num:0,elapsedFirst:a.elapsed},this.scope.$emit("buyFirst",a)),c.clicks+=1,c.num+=a.num),this.session.save(),delete a.now,delete a.unit,delete a.upgrade,this.replay.push(a)},a.prototype.listen=function(a){return a.$on("reset",function(a){return function(){return a._init(),a.replay.reset()}}(this)),a.$on("command",function(a){return function(b,d){return c.debug("statistics",b,d),a.push(d)}}(this))},a}()}]),angular.module("swarmApp").factory("statistics",["session","StatisticsListener","$rootScope",function(a,b,c){var d;return d=new b(a,c),d.listen(c),d}])}.call(this),function(){"use strict";angular.module("swarmApp").controller("StatisticsCtrl",["$scope","session","statistics","game","$interval","options",function(a,b,c,d,e,f){var g,h;return a.listener=c,a.session=b,a.stats=b.statistics,a.game=d,g=e(function(){return function(){return a.game.tick()}}(this),f.fpsSleepMillis()),a.$on("$destroy",function(){return function(){return e.cancel(g)}}(this)),h=function(a){var b;return b=moment.utc(a),""+(parseInt(b.format("DDD"))-1)+"d "+b.format("H\\h mm:ss.SSS")},a.unitStats=function(b){var c,d;return c=_.clone(null!=(d=a.stats.byUnit)?d[null!=b?b.name:void 0]:void 0),null!=c&&(c.elapsedFirstStr=h(c.elapsedFirst)),c},a.hasUnitStats=function(b){return!!a.unitStats(b)},a.showStats=function(b){return a.hasUnitStats(b)||!b.isBuyable()&&b.isVisible()},a.upgradeStats=function(b){var c;return c=a.stats.byUpgrade[b.name],null!=c&&(c.elapsedFirstStr=h(c.elapsedFirst)),c},a.hasUpgradeStats=function(b){return!!a.upgradeStats(b)}}])}.call(this),function(){"use strict";angular.module("swarmApp").value("timecheckerServerFormat","ddd, DD MMM YYYY HH:mm:ss"),angular.module("swarmApp").factory("TimeChecker",["$rootScope","$http","$q","timecheckUrl","session","game","timecheckerServerFormat","$log",function(a,b,c,d,e,f,g,h){var i;return i=function(){function e(a){this.threshold=moment.duration(a,"hours")}return e.prototype.fetchNetTime=function(){return b.get(d)},e.prototype.isNetTimeInvalid=function(){return this.fetchNetTime().then(function(b){return function(c){var d;return d=b._isNetTimeInvalid(c.headers().date),a.$emit("timecheck",c),d}}(this),function(){return function(b){return h.debug("fetchnettime promise failed",b),a.$emit("timecheckError",{error:"fetchNetTime promise failed",res:b}),c.reject(b)}}(this))},e.prototype._parseDate=function(a){return a=a.replace(/\ [A-Za-z]+$/,""),moment(a,g,!0)},e.prototype._isNetTimeInvalid=function(b,c){var d,e;return null==c&&(c=moment()),e=this._parseDate(b),e.isValid()?(d=c.diff(e,"hours"),Math.abs(d)>this.threshold.as("hours")):(a.$emit("timecheckError",{error:"couldn't parse date: "+b}),null)},e.prototype.enforceNetTime=function(){return this.isNetTimeInvalid().then(function(){return function(b){return b&&a.$emit("timecheckFailed"),b}}(this))},e}()}]),angular.module("swarmApp").value("timecheckUrl","./version.json"),angular.module("swarmApp").value("timecheckThresholdHours",96),angular.module("swarmApp").factory("timecheck",["TimeChecker","timecheckThresholdHours",function(a,b){return new a(b)}]),angular.module("swarmApp").factory("VersionChecker",["util","$log",function(a,b){var c;return c=function(){function c(a){this.version=a,this._MAX=1e5}return c.prototype.check=function(a){return this.compare(this.version,a)<0?(b.debug("newer version found on server! reloading.",{local:this.version,remote:a}),window.location.reload()):void 0},c.prototype.compare=function(a,b){return this.normalize(a)-this.normalize(b)},c.prototype.normalize=function(b){var c,d,e,f,g,h;for(f=0,d=b.split("."),d.reverse(),e=g=0,h=d.length;h>g;e=++g)c=d[e],c=parseInt(c),a.assert(!_.isNaN(c),"version compare failed, a chunk isNaN",c,b),a.assert(c<this._MAX,"version compare failed, a chunk is too big",c,b),f+=c*Math.pow(this._MAX,e);return f},c}()}]),angular.module("swarmApp").factory("versioncheck",["$rootScope","VersionChecker","version","$log",function(a,b,c,d){var e;return e=new b(c),a.$on("timecheck",function(a,b){var f,g;return f=null!=b&&null!=(g=b.data)?g.version:void 0,d.debug("version check",{local:c,remote:f}),f?e.check(f):void 0}),e}])}.call(this),function(){"use strict";angular.module("swarmApp").factory("FlashQueue",["$timeout","util","env",function(a,b,c){var d;return d=function(){function b(a,b){this.showTime=null!=a?a:5e3,this.fadeTime=null!=b?b:1e3,this.queue=[],this._state="invisible",this._timeout=null}return b.prototype.push=function(a){return this.queue.push(a),"prod"!==c&&1===this.queue.length?this.animate():void 0},b.prototype.animate=function(){return"invisible"===this._state?(this._state="visible",this._timeout=a(function(b){return function(){return b._state="fading",b._timeout=a(function(){return b._state="invisible",b.queue.shift(),b.queue.length?b.animate():void 0},b.fadeTime)}}(this),this.showTime)):void 0},b.prototype.isVisible=function(){return"visible"===this._state},b.prototype.get=function(){return this.queue[0]},b}()}]),angular.module("swarmApp").factory("flashqueue",["FlashQueue",function(a){return new a}])}.call(this),function(){"use strict";angular.module("swarmApp").controller("FlashQueueCtrl",["$scope","flashqueue",function(a,b){return a.achieveQueue=b}])}.call(this);